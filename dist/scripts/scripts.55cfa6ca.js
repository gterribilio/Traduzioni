"use strict";function q(a){throw a}function y(a,b,c){4!==b.length&&q(new sjcl.exception.invalid("invalid aes block size"));var d=a.b[c],e=b[0]^d[0],f=b[c?3:1]^d[1],g=b[2]^d[2];b=b[c?1:3]^d[3];var h,i,j,k,l=d.length/4-2,m=4,n=[0,0,0,0];h=a.k[c],a=h[0];var o=h[1],p=h[2],r=h[3],s=h[4];for(k=0;l>k;k++)h=a[e>>>24]^o[f>>16&255]^p[g>>8&255]^r[255&b]^d[m],i=a[f>>>24]^o[g>>16&255]^p[b>>8&255]^r[255&e]^d[m+1],j=a[g>>>24]^o[b>>16&255]^p[e>>8&255]^r[255&f]^d[m+2],b=a[b>>>24]^o[e>>16&255]^p[f>>8&255]^r[255&g]^d[m+3],m+=4,e=h,f=i,g=j;for(k=0;4>k;k++)n[c?3&-k:k]=s[e>>>24]<<24^s[f>>16&255]<<16^s[g>>8&255]<<8^s[255&b]^d[m++],h=e,e=f,f=g,g=b,b=h;return n}function z(a,b){var c,d,e,f=b.slice(0),g=a.r,h=a.b,i=g[0],j=g[1],k=g[2],l=g[3],m=g[4],n=g[5],o=g[6],p=g[7];for(c=0;64>c;c++)16>c?d=f[c]:(d=f[c+1&15],e=f[c+14&15],d=f[15&c]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+f[15&c]+f[c+9&15]|0),d=d+p+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(o^m&(n^o))+h[c],p=o,o=n,n=m,m=l+d|0,l=k,k=j,j=i,i=d+(j&k^l&(j^k))+(j>>>2^j>>>13^j>>>22^j<<30^j<<19^j<<10)|0;g[0]=g[0]+i|0,g[1]=g[1]+j|0,g[2]=g[2]+k|0,g[3]=g[3]+l|0,g[4]=g[4]+m|0,g[5]=g[5]+n|0,g[6]=g[6]+o|0,g[7]=g[7]+p|0}function C(a,b){var c,d=sjcl.random.w[a],e=[];for(c in d)d.hasOwnProperty(c)&&e.push(d[c]);for(c=0;c<e.length;c++)e[c](b)}function E(a){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),a,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),a,"loadtime")}function A(a){a.b=B(a).concat(B(a)),a.A=new sjcl.cipher.aes(a.b)}function B(a){for(var b=0;4>b&&(a.f[b]=a.f[b]+1|0,!a.f[b]);b++);return a.A.encrypt(a.f)}function D(a,b){return function(){b.apply(a,arguments)}}var app=angular.module("lemietraduzioniApp",["ngRoute","Services","CommonModule","HomeCtrlModule","HomeCtrlTraduttoreModule","HomeCtrlAgenziaModule","SearchCtrlAgenziaModule","DirectivesModule","JobsCtrlTraduttoreModule","fileUpload","ngLinkedIn"]),app_cfg={endpoint_server:"http://52.26.216.27",endpoint_upload_server:"http://52.26.216.27",environment:"development",request:{url:""},development:{urls:{config_endpoint:"http://52.26.216.27/config.json.php"},request:{}},production:{}};app.constant("APP_CFG",app_cfg),app.config(["$routeProvider","$httpProvider","$linkedInProvider",function(a,b,c){a.when("/",{templateUrl:"views/home2.html",controller:"HomeCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/home_agenzia",{templateUrl:"views/agenzia/home_agenzia.html",controller:"HomeAgenziaCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/blogs",{templateUrl:"views/blogs.html",controller:"HomeCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/home_traduttore",{templateUrl:"views/traduttore/home_traduttore.html",controller:"HomeTraduttoreCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/jobs_traduttore",{templateUrl:"views/traduttore/jobs_traduttore.html",controller:"JobsTraduttoreCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/workarea/:tipo/:id",{templateUrl:"views/traduttore/workarea.html",controller:"WorkareaTraduttoreCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/search_agenzia",{templateUrl:"views/agenzia/search_agenzia.html",controller:"SearchAgenziaCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/translatorDetail/:user_id",{templateUrl:"views/agenzia/translatorDetail.html",controller:"TranslatorDetailCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).when("/send_a_job/:user_id",{templateUrl:"views/agenzia/send_a_job.html",controller:"SendAJobCtrl",resolve:{MyServiceData:["customFactory",function(a){return a.promise}]}}).otherwise({redirectTo:"/"}),c.set("appKey","78yuued4wl0cgc").set("scope","r_emailaddress r_basicprofile").set("authorize",!1)}]),app.run(["$rootScope","$window","services","$route",function(a,b,c){b.fbAsyncInit=function(){FB.init({appId:"456422687866536",channelUrl:"app/channel.html",status:!0,cookie:!0,xfbml:!0})},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="http://connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document)}]);var services=angular.module("Services",[]);services.factory("services",["APP_CFG","$http",function(a,b){function c(){FB.api("/me",function(a){$rootScope.$apply(function(){$rootScope.user=a})})}var d={endpoint:a.request.url};return d.init=function(){d.endpoint=null!=a.environment?a[a.environment].request.url:a.request.url},d.getFromRESTServer=function(a,c){return d.init(),b.jsonp(d.endpoint+"?callback=JSON_CALLBACK&action="+c+"&"+a)},d.getCodeTable=function(a,c){return d.init(),b.jsonp(d.endpoint+"?callback=JSON_CALLBACK&action=get_codetable&"+a)},d.getConfiguration=function(c){return d.init(),b.jsonp(a[a.environment].urls.config_endpoint+"?callback=JSON_CALLBACK")},d.watchAuthenticationStatusChange=function(){FB.Event.subscribe("auth.authResponseChange",function(a){"connected"===a.status&&c()})},d}]);var direttive=angular.module("DirectivesModule",[]);direttive.directive("templateSnippet",function(){return{restrict:"A",transclude:!0,templateUrl:function(a,b){return"views/"+b.name+".html"}}}).directive("pwCheck",[function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.pwCheck;b.add(e).on("keyup",function(){a.$apply(function(){var a=b.val()===$(e).val();d.$setValidity("pwmatch",a)})})}}}]).directive("scrollOnClick",function(){return{restrict:"A",scope:{scroll:"=scroll"},link:function(a,b,c){var d=c.href;b.on("click",function(){var a;a=d?$(d):b,$("body").animate({scrollTop:a.offset().top},1e3)})}}}).directive("pdf",function(){return{restrict:"E",link:function(a,b,c){a.$watch("getJobTODO",function(d){var e=a.$eval(c.src);null!=e&&b.replaceWith('<iframe src="'+a.$eval(e)+'" style="width: 100%; height: 370px;" frameborder="0" scrolling="no" />')})}}}).directive("starRating",function(){return{restrict:"A",template:"<ul class='rating'>  <li ng-repeat='star in stars' ng-class='star' ng-click='toggle($index)'>    <i class='fa fa-lg fa-star'></i>  </li></ul>",scope:{ratingValue:"=",max:"=",onRatingSelected:"&"},link:function(a,b,c){var d=function(){a.stars=[];for(var b=0;b<a.max;b++)a.stars.push({filled:b<a.ratingValue})};a.toggle=function(b){a.ratingValue=b+1,a.onRatingSelected({rating:b+1})},a.$watch("ratingValue",function(a,b){d()})}}}).directive("ngTranscludeCustom",["$timeout",function(a){return{restrict:"AE",link:function(b,c,d){b.$last===!0&&a(function(){b.$emit("ngRepeatFinished")})}}}]);var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};angular.module("DirectivesModule").directive("loader",function(){return{restrict:"AE",link:function(a,b,c){$(b).delay(600).fadeOut()}}}).directive("preloader",function(){return{restrict:"AE",link:function(a,b,c){$(b).delay(1e3).fadeOut("slow")}}}).directive("headerText",function(){return{restrict:"AE",link:function(a,b,c){$(b).flexslider({animation:"slide",selector:".text-slider .text-slides",slideshowSpeed:5e3,controlNav:!1,directionNav:!1,direction:"vertical",start:function(a){$("body").removeClass("loader")}})}}}).directive("slides",function(){return{restrict:"AE",link:function(a,b,c){$(b).superslides({animation:"fade",play:7e3,animation_speed:3e3})}}}).directive("zoomContainer",function(){return{restrict:"AE",link:function(a,b,c){function d(){$(".zoom-container img").fadeOut(2e3,function(){$(".zoom-container").find("img").removeClass("zoom-in")}),$(".zoom-container img").fadeIn(1500,function(){$(".zoom-container").find("img").addClass("zoom-in")}),e=setTimeout(d,9e4)}$(b).find("img").addClass("zoom-in");var e=setTimeout(d,9e4)}}}).directive("altHeader",function(){return{restrict:"AE",link:function(a,b,c){$(b).css({height:$(window).height()+"px"}),$(window).resize(function(){$(b).css({height:$(window).height()+"px"})})}}}).directive("scroll",function(){return{restrict:"ACE",link:function(a,b,c){$(".scroll").bind("click",function(a){var b=$(this),c=$("#navigation").outerHeight();0!=$(b.attr("href")).length&&($("html, body").stop().animate({scrollTop:$(b.attr("href")).offset().top-c+"px"},1200,"easeInOutExpo"),a.preventDefault())})}}}).directive("navigation",function(){return{restrict:"ACE",link:function(a,b,c){$(window).scroll(function(){0!=$("#navigation_menu").length&&($("#navigation_menu").offset().top>50?$(b).removeClass("hide-nav").addClass("show-nav"):$(b).removeClass("show-nav").addClass("hide-nav"))})}}}).directive("mobileNavButton",function(){return{restrict:"ACE",link:function(a,b,c){$(b).click(function(){$(".nav-menu").slideToggle("8000")}),$(".nav a").click(function(){$(window).width()<960&&$(".nav-menu").slideToggle("2000")})}}}).directive("container",function(){return{restrict:"ACE",link:function(a,b,c){$(b).flexslider({animation:"fade",selector:".testimonial-slider .t-slide",controlNav:!1,directionNav:!0,slideshowSpeed:8e3})}}}).directive("container",function(){return{restrict:"ACE",link:function(a,b,c){isMobile.any()||($(".parallax1").parallax("50%",.5),$(".parallax2").parallax("50%",.5),$(".parallax3").parallax("50%",.5),$(".parallax4").parallax("50%",.5),$(".parallax5").parallax("50%",.5),$(".parallax6").parallax("50%",.5))}}}).directive("fitVids",function(){return{restrict:"ACE",link:function(a,b,c){$(b).fitVids()}}}).directive("animated",function(){return{restrict:"C",link:function(a,b,c){$(b).appear(function(){var a=$(this),b=a.data("animate");if(!a.hasClass("visible")){var c=a.data("animate-delay");c?setTimeout(function(){a.addClass(b+" visible")},c):a.addClass(b+" visible")}})}}}).directive("count",function(){return{restrict:"C",link:function(a,b,c){$(b).appear(function(){$(".count").each(function(){var a=$(this).attr("data-to");$(this).find(".count-number").delay(6e3).countTo({from:50,to:a,speed:3e3,refreshInterval:50})})})}}}).directive("tipped",function(){return{restrict:"C",link:function(a,b,c){$(".tipped").tipper({direction:"top"})}}}).directive("accordionButton",function(){return{restrict:"C",link:function(a,b,c){$(b).click(function(){$("div.accordion-content").slideUp("normal"),$("div.accordion-button i").hasClass("fa-arrow-circle-o-down")&&$("div.accordion-button i").removeClass("fa-arrow-circle-o-down").addClass("fa-arrow-circle-o-right"),$(this).find("i").toggleClass("fa-arrow-circle-o-right").toggleClass("fa-arrow-circle-o-down"),$(this).next().slideDown("normal")}),$("div.accordion-content").hide(),$("div.accordion-content.active").slideDown("normal")}}}).directive("skillbar",function(){return{restrict:"C",link:function(a,b,c){$(b).appear(function(){$(this).find(".skillbar-bar").animate({width:$(this).attr("data-percent")},3e3)})}}}).directive("googleMap",function(){return{restrict:"ACE",link:function(a,b,c){var d=new google.maps.LatLng(45.0734888,7.6756065),e={zoom:13,center:d,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!1},f=new google.maps.Map(document.getElementById("google-map"),e),g="images/marker.png",h=new google.maps.LatLng(45.0734768,7.6756365),i='<div id="map-tooltip"><h5>Our Office Location</h5><p>Come see us!</p></div>',j=new google.maps.Marker({position:h,map:f,title:"Hello World!",icon:g}),k=new google.maps.InfoWindow({content:i});google.maps.event.addListener(j,"click",function(){k.open(f,j)})}}}).directive("closeAlert",function(){return{restrict:"ACE",link:function(a,b,c){$(b).closest(".alert").fadeOut(1e3)}}}).directive("tab",function(){return{restrict:"AE",link:function(a,b,c){$(".nav.nav-tabs").click(function(a){a.preventDefault(),$(this).tab("show")})}}}).directive("flexslider",function(){return{restrict:"AE",link:function(a,b,c){$(window).load(function(){$(".flexslider-custom").flexslider()})}}}).directive("comingSoon",function(){return{restrict:"AE",link:function(a,b,c){$(window).load(function(){function a(){var g=new Date;if(g>b)c.html("<h1>0</H1><p>Day</p>"),d.html("<h1>0</h1><p>Hour</p>"),e.html("<h1>0</h1><p>Minute</p>"),f.html("<h1>0</h1><p>Second</p>");else{var h=60*-g.getTimezoneOffset()+(b.getTime()-g.getTime())/1e3,i=Math.floor(h/86400);c.html("<h1>"+i+"</h1><p>Day"+(i>1?"s":""),"</p>"),h-=86400*i;var j=Math.floor(h/3600);d.html("<h1>"+j+"</h1><p>Hour"+(j>1?"s":""),"</p>"),h-=3600*j;var k=Math.floor(h/60);e.html("<h1>"+k+"</h1><p>Minute"+(k>1?"s":""),"</p>"),h=Math.floor(h-60*k),f.html("<h1>"+h+"</h1><p>Second"+(h>1?"s":""),"</p>"),setTimeout(a,1e3)}}var b=new Date(2015,8,14,11,0),c=$("#days"),d=$("#hours"),e=$("#minutes"),f=$("#seconds");a()})}}});var home=angular.module("HomeCtrlModule",[]);home.controller("HomeCtrl",["$scope","$rootScope","$window","services","$location","$anchorScroll","customFactory","$sce",function(a,b,c,d,e,f,g,h){function i(){FB.api("/me",function(c){b.facebookData=c,d.getFromRESTServer("username="+b.facebookData.email+"&password="+b.facebookData.id+"&nome="+b.facebookData.first_name+"&cognome="+b.facebookData.last_name+"&email="+b.facebookData.email+"&ruolo="+a.ruolo+"&social=FACEBOOK","register").success(function(c){null!=c.jsonError||null!=c.errCode?$.notify("Email already present! Please sign in!",{type:"danger",allow_dismiss:!0}):a.doAccedi(b.facebookData.email,b.facebookData.id)})})}function j(){FB.api("/me",function(c){b.facebookData=c,a.doAccedi(b.facebookData.email,b.facebookData.id)})}b.showLogin=!1,b.register=!1,b.showBlog=!1,b.showWorkarea=!1,a.usernamePresent=!1,a.userType="translator",a.ruolo="TRADUTTORE",b.image=null,function(){g.get("isLogged")&&null!=g.get("userData")&&(b.userData=g.get("userData"),"TRADUTTORE"==b.userData.RUOLO?e.path("/home_traduttore"):e.path("/home_agenzia"))}(),d.getCodeTable("codetable=1").success(function(a){b.employees=a}),d.getCodeTable("codetable=2").success(function(a){b.countries=a}),d.getCodeTable("codetable=3").success(function(a){b.languages=a}),b.doLogout=function(){e.path("/"),b.isLogged=!1,localStorage.clear(),IN.User.logout(),FB.getLoginStatus(function(a){"connected"===a.status&&FB.logout()})},b.doJobsTraduttore=function(){e.hash("#/jobs_traduttore"),f()},a.doContatta=function(){d.getFromRESTServer("email="+a.email+"&subject="+a.subject+"&text="+a.text,"contact").success(function(a){null!=a.jsonError||null!=a.errCode?alert(a.errMsg):(alert("Thanks for your support! We'll call you as soon as possible!"),e.hash("intro"),f())})},a.doRegister=function(){d.getFromRESTServer("username="+a.username+"&password="+a.password+"&email="+a.email+"&ruolo="+a.ruolo,"register").success(function(b){null!=b.jsonError||null!=b.errCode?$.notify(b.errMsg,{type:"danger",allow_dismiss:!0}):a.doAccedi(a.username,a.password)})},a.doRegisterTemp=function(){d.getFromRESTServer("type="+a.userType+"&email="+a.email,"registerTemp").success(function(a){null!=a.jsonError||null!=a.errCode?$.notify(a.errMsg,{type:"danger",allow_dismiss:!0}):$.notify("Thanks for your support! We'll contact you when our service is online!",{type:"success",allow_dismiss:!0})})},a.doAccedi=function(a,c){d.getFromRESTServer("username="+a+"&password="+c,"login").success(function(a){null!=a.jsonError||null!=a.errCode?$.notify(a.errMsg,{type:"danger",allow_dismiss:!0},{z_index:1e3}):(b.isLogged=!0,g.set("isLogged",!0),b.showLogin=!1,b.userData=a[0],g.set("userData",b.userData),"TRADUTTORE"==b.userData.RUOLO?($.notify("Welcome "+b.userData.NOME+"! Find your translations now!",{type:"success",allow_dismiss:!0}),e.path("/home_traduttore")):($.notify("Welcome "+b.userData.NOME+"! Post your translation now!",{type:"success",allow_dismiss:!0}),e.path("/home_agenzia")))}).error(function(a,b){console.error("Repos error",b,a)})},a.checkUsername=function(b){d.getFromRESTServer("username="+b,"checkUsername").success(function(b){null!=b.jsonError||null!=b.errCode?(a.usernamePresent=!0,$.notify("Username already present! Please sign in!",{type:"danger",allow_dismiss:!0})):a.usernamePresent=!1})},a.linkedinRegister=function(c){IN.User.authorize(function(){IN.API.Profile("me").fields(["firstName","lastName","location:(name,country:(code))","pictureUrls::(original)","emailAddress","id"]).result(function(c){b.linkedinData=c.values[0];var e=b.linkedinData.location.name.split(","),f=e[0],g=e[1],h=b.linkedinData.pictureUrls.hasOwnProperty("values")?b.linkedinData.pictureUrls.values[0]:"";d.getFromRESTServer("username="+b.linkedinData.emailAddress+"&password="+b.linkedinData.id+"&nome="+b.linkedinData.firstName+"&cognome="+b.linkedinData.lastName+"&email="+b.linkedinData.emailAddress+"&ruolo="+a.ruolo+"&country="+g+"&city="+f+"&pictureUrl="+h+"&social=LINKEDIN","register").success(function(c){null!=c.jsonError||null!=c.errCode?$.notify("Email already present! Please sign in!",{type:"danger",allow_dismiss:!0}):a.doAccedi(b.linkedinData.emailAddress,b.linkedinData.id)})})})},a.linkedinLogin=function(){IN.User.authorize(function(){IN.API.Profile("me").fields(["firstName","lastName","location:(name,country:(code))","pictureUrl","emailAddress","id"]).result(function(c){b.linkedinData=c.values[0],a.doAccedi(b.linkedinData.emailAddress,b.linkedinData.id)})})},a.facebookRegister=function(){FB.getLoginStatus(function(a){"connected"===a.status?i(role):FB.login(function(a){"connected"===a.status&&i(role)},{scope:"email, public_profile, user_friends",return_scopes:!0})})},a.facebookLogin=function(){FB.getLoginStatus(function(a){"connected"===a.status?j():FB.login(function(a){"connected"===a.status&&j()},{scope:"email, public_profile, user_friends",return_scopes:!0})})},d.getFromRESTServer("","getBlogArticle").success(function(a){if(null!=a.jsonError||null!=a.errCode);else{b.blogs=a;for(var c=0;c<b.blogs.length;c++)b.blogs[c].TESTO_LIMITED=h.trustAsHtml(b.blogs[c].TESTO_LIMITED),b.blogs[c].TESTO=h.trustAsHtml(b.blogs[c].TESTO)}}),d.getFromRESTServer("","getAllBlogArticle").success(function(a){if(null!=a.jsonError||null!=a.errCode);else{b.allBlogs=a;for(var c=0;c<b.allBlogs.length;c++)b.allBlogs[c].TESTO_LIMITED=h.trustAsHtml(b.allBlogs[c].TESTO_LIMITED),b.allBlogs[c].TESTO=h.trustAsHtml(b.allBlogs[c].TESTO)}}),a.showAllBlogsArticle=function(){e.path("/blogs")},a.closeBlog=function(){e.path("/")},a.setArticle=function(a){for(var c=0;c<b.allBlogs.length;c++)b.allBlogs[c].ID==a&&(b.article=b.allBlogs[c])}}]);var home=angular.module("HomeCtrlTraduttoreModule",[]);home.controller("HomeTraduttoreCtrl",["$scope","$rootScope","$window","services","$location","customFactory","APP_CFG",function(a,b,c,d,e,f,g){function h(){for(var c=0;c<b.countries.length;c++)b.countries[c].DESCRIZIONE==b.userData.PAESE&&(a.countryTraduttore=b.countries[c])}function i(){for(var c=0;c<b.languages.length;c++)b.languages[c].DESCRIZIONE==b.userData.MADRELINGUA&&(a.mothertongueTraduttore=b.languages[c])}b.image=null,b.isLogged=f.get("isLogged"),b.userData=f.get("userData"),(null==b.isLogged||null==b.userData)&&e.path("/"),null!=b.isLogged&&null!=b.userData&&"AGENZIA"==b.userData.RUOLO&&e.path("/home_agenzia"),a.nomeTraduttore=b.userData.NOME,a.cognomeTraduttore=b.userData.COGNOME,a.birthdayTraduttore=b.userData.DATA_NASCITA,a.cittaTraduttore=b.userData.CITTA,a.emailTraduttore=b.userData.EMAIL,a.vat=b.userData.VAT,d.getCodeTable("codetable=2").success(function(a){b.countries=a,h()}),d.getCodeTable("codetable=3").success(function(a){b.languages=a,i()}),d.getCodeTable("codetable=4").success(function(a){b.fields=a}),d.getCodeTable("codetable=5").success(function(a){b.services=a}),d.getCodeTable("codetable=6").success(function(a){b.currencies=a}),d.getCodeTable("codetable=7").success(function(a){b.levels=a,f.set("levels",b.levels)}),function(){d.getFromRESTServer("user_id="+b.userData.ID,"getPair").success(function(b){null!=b.jsonError||null!=b.errCode?a.pairList=null:a.pairList=b}),d.getFromRESTServer("user_id="+b.userData.ID,"getEducation").success(function(b){null!=b.jsonError||null!=b.errCode?a.educationList=null:a.educationList=b}),d.getFromRESTServer("user_id="+b.userData.ID,"getCertification").success(function(b){null!=b.jsonError||null!=b.errCode?a.certificationList=null:a.certificationList=b})}(),d.getFromRESTServer("user_id="+b.userData.ID,"getImagePath").success(function(a){null!=a.jsonError||null!=a.errCode||(a[0].IMAGE!=b.userData.IMAGE&&(b.userData.IMAGE=a[0].IMAGE,f.set("userData",b.userData)),d.getFromRESTServer("user_id="+b.userData.ID,"getUserProfilePicture").success(function(a){null!=a.jsonError||null!=a.errCode?alert(JSON.stringify(a)):b.image=a.base64}))}),a.doUpdateProfileTraduttore=function(){var c=confirm("Do you really want to save your changes?");if(c){var e=null===a.mothertongueTraduttore?null:a.mothertongueTraduttore.DESCRIZIONE,g=null===a.countryTraduttore?null:a.countryTraduttore.DESCRIZIONE;d.getFromRESTServer("nomeTraduttore="+a.nomeTraduttore+"&cognomeTraduttore="+a.cognomeTraduttore+"&birthdayTraduttore="+a.birthdayTraduttore+"&citta="+a.cittaTraduttore+"&country="+g+"&mothertongueTraduttore="+e+"&email="+a.emailTraduttore+"&vat="+a.vat+"&ruolo=TRADUTTORE&id="+b.userData.ID,"updateProfile").success(function(c){null!=c.jsonError||null!=c.errCode?alert(c.errMsg):(b.userData=c[0],f.set("userData",a.userData),$.notify("Your profile has been successfully updated!",{type:"success",allow_dismiss:!0}))})}},a.doAddPair=function(){d.getFromRESTServer("from="+a.from.DESCRIZIONE+"&to="+a.to.DESCRIZIONE+"&field="+a.field.DESCRIZIONE+"&service="+a.service.DESCRIZIONE+"&price="+a.price+"&currency="+a.currency.DESCRIZIONE+"&user_id="+b.userData.ID,"addPair").success(function(b){null!=b.jsonError||null!=b.errCode?$.notify(b.errMsg,{type:"danger",allow_dismiss:!0}):a.pairList=b})},a.doDeletePair=function(c){d.getFromRESTServer("pair_id="+c+"&user_id="+b.userData.ID,"deletePair").success(function(b){null!=b.jsonError||null!=b.errCode?a.pairList=null:a.pairList=b})},a.doAddEducation=function(){d.getFromRESTServer("institute="+a.institute+"&field="+a.fieldE+"&user_id="+b.userData.ID,"addEducation").success(function(b){null!=b.jsonError||null!=b.errCode?$.notify(b.errMsg,{type:"danger",allow_dismiss:!0}):a.educationList=b})},a.doDeleteEducation=function(c){d.getFromRESTServer("education_id="+c+"&user_id="+b.userData.ID,"deleteEducation").success(function(b){null!=b.jsonError||null!=b.errCode?a.educationList=null:a.educationList=b})},a.doAddCertification=function(){d.getFromRESTServer("institute="+a.instituteC+"&date="+a.date+"&certification="+a.certification+"&level="+a.level.DESCRIZIONE+"&user_id="+b.userData.ID,"addCertification").success(function(b){null!=b.jsonError||null!=b.errCode?$.notify(b.errMsg,{type:"danger",allow_dismiss:!0}):a.certificationList=b})},a.doDeleteCertification=function(c){d.getFromRESTServer("certification_id="+c+"&user_id="+b.userData.ID,"deleteCertification").success(function(b){null!=b.jsonError||null!=b.errCode?a.certificationList=null:a.certificationList=b})}}]);var home=angular.module("JobsCtrlTraduttoreModule",[]);home.controller("JobsTraduttoreCtrl",["$scope","$rootScope","$window","services","$location","customFactory",function(a,b,c,d,e,f){b.isLogged=f.get("isLogged"),b.userData=f.get("userData"),(null==f.get("isLogged")||null==f.get("userData"))&&e.path("/"),function(){d.getFromRESTServer("user_id="+b.userData.ID,"getInDeadlineTranslationJobs").success(function(b){null!=b.jsonError||null!=b.errCode?a.indeadlineTranslationList=null:a.indeadlineTranslationList=b}),d.getFromRESTServer("user_id="+b.userData.ID,"getDoneTranslationJobs").success(function(b){null!=b.jsonError||null!=b.errCode?a.doneTranslationList=null:a.doneTranslationList=b}),d.getFromRESTServer("user_id="+b.userData.ID,"getInDeadlineCorrectionJobs").success(function(b){null!=b.jsonError||null!=b.errCode?a.indeadlineCorrectionList=null:a.indeadlineCorrectionList=b}),d.getFromRESTServer("user_id="+b.userData.ID,"getDoneCorrectionJobs").success(function(b){null!=b.jsonError||null!=b.errCode?a.doneCorrectionList=null:a.doneCorrectionList=b})}()}]);var home=angular.module("HomeCtrlAgenziaModule",[]);home.controller("HomeAgenziaCtrl",["$scope","$rootScope","$window","services","$location","customFactory","APP_CFG",function(a,b,c,d,e,f,g){function h(){for(var c=0;c<b.countries.length;c++)b.countries[c].DESCRIZIONE==b.userData.PAESE&&(a.countryAgenzia=b.countries[c])}function i(){for(var c=0;c<b.employees.length;c++)b.employees[c].DESCRIZIONE==b.userData.NUM_IMPIEGATI&&(a.impiegatoAgenzia=b.employees[c])}b.image=null,a.comments=null,a.commentsAll=null,b.isLogged=f.get("isLogged"),b.userData=f.get("userData"),(null==b.isLogged||null==b.userData)&&e.path("/"),null!=b.isLogged&&null!=b.userData&&"TRADUTTORE"==b.userData.RUOLO&&e.path("/home_traduttore"),a.nomeAgenzia=b.userData.NOME,a.indirizzoAgenzia=b.userData.INDIRIZZO,a.cittaAgenzia=b.userData.CITTA,a.countryAgenzia=b.userData.PAESE,a.codicePostaleAgenzia=b.userData.CODICE_POSTALE,a.telefonoAgenzia=b.userData.PHONE,a.emailAgenzia=b.userData.EMAIL,a.webAgenzia=b.userData.SITO_WEB,a.vat=b.userData.VAT,d.getFromRESTServer("user_id="+b.userData.ID,"getImagePath").success(function(a){null!=a.jsonError||null!=a.errCode||(a[0].IMAGE!=b.userData.IMAGE&&(b.userData.IMAGE=a[0].IMAGE,f.set("userData",b.userData)),d.getFromRESTServer("user_id="+b.userData.ID,"getUserProfilePicture").success(function(a){null!=a.jsonError||null!=a.errCode?alert(JSON.stringify(a)):b.image=a.base64}))}),d.getFromRESTServer("user_id="+b.userData.ID,"getAgencyComments").success(function(b){null!=b.jsonError||null!=b.errCode||(a.comments=b)}),d.getFromRESTServer("user_id="+b.userData.ID,"getAllAgencyComments").success(function(b){null!=b.jsonError||null!=b.errCode||(a.commentsAll=b)}),d.getCodeTable("codetable=2").success(function(a){b.countries=a,h()}),d.getCodeTable("codetable=1").success(function(a){b.employees=a,i()}),a.doUpdateProfileAgenzia=function(){var c=confirm("Do you really want to save your changes?");if(c){var e=null===a.countryAgenzia?null:a.countryAgenzia.DESCRIZIONE,g=null===a.impiegatoAgenzia?null:a.impiegatoAgenzia.DESCRIZIONE;d.getFromRESTServer("nome="+a.nomeAgenzia+"&impiegati="+g+"&indirizzo="+a.indirizzoAgenzia+"&citta="+a.cittaAgenzia+"&country="+e+"&codicePostale="+a.codicePostaleAgenzia+"&telefono="+a.telefonoAgenzia+"&email="+a.emailAgenzia+"&web="+a.webAgenzia+"&vat="+a.vat+"&ruolo=AGENZIA&id="+b.userData.ID,"updateProfile").success(function(c){null!=c.jsonError||null!=c.errCode||(b.userData=c[0],f.set("userData",a.userData),$.notify("Your profile has been successfully updated!",{type:"success",allow_dismiss:!0}))})}},a.reportAbuse=function(a){d.getFromRESTServer("&id="+a,"reportAbuse").success(function(a){null!=a.jsonError||null!=a.errCode?alert(a.errMsg):$.notify("A notification has been sent to us! We'll contact you as soon as possible! King regards!",{type:"success",allow_dismiss:!0})})},a.$on("ngRepeatFinished",function(){$("article").readmore({speed:75,lessLink:'<a href="#">Read less</a>',collapsedHeight:40})})}]);var search=angular.module("SearchCtrlAgenziaModule",[]);search.controller("SearchAgenziaCtrl",["$scope","$rootScope","$window","services","$location","customFactory",function(a,b,c,d,e,f){b.isLogged=f.get("isLogged"),b.userData=f.get("userData"),(null==f.get("isLogged")||null==f.get("userData"))&&e.path("/"),null!=b.isLogged&&null!=b.userData&&"TRADUTTORE"==b.userData.RUOLO&&e.path("/home_traduttore"),a.doSearch=function(c){var c={mothertongueSearchFrom:null==a.mothertongueSearchFrom?null!=c&&null!=c.mothertongueSearchFrom?c.mothertongueSearchFrom:null:a.mothertongueSearchFrom.DESCRIZIONE,mothertongueSearchTo:null==a.mothertongueSearchTo?null!=c&&null!=c.mothertongueSearchTo?c.mothertongueSearchTo:null:a.mothertongueSearchTo.DESCRIZIONE,service:null==a.service?null!=c&&null!=c.service?c.service:null:a.service.DESCRIZIONE,field:null!=a.field&&null!=a.field.DESCRIZIONE?a.field.DESCRIZIONE:null!=c&&null!=c.field?c.field:null,pricefrom:null==a.pricefrom?null!=c?c.pricefrom:null:null!=a.pricefrom?c.pricefrom:null,priceto:null==a.priceto?null!=c?c.priceto:null:null!=a.priceto?c.priceto:null};f.setSessionStorage("filter",c),d.getFromRESTServer("mothertongueSearchFrom="+c.mothertongueSearchFrom+"&mothertongueSearchTo="+c.mothertongueSearchTo+"&service="+c.service+(null!=c.field?"&field="+c.field:"")+(null!=c.pricefrom?"&pricefrom="+c.pricefrom:"")+(null!=c.priceto?"&priceto="+c.priceto:"")+"&user_id="+b.userData.ID,"search").success(function(b){if(null!=b.jsonError||null!=b.errCode)a.searchResult=null;else{a.searchResult=b;for(var c=0;c<a.searchResult.length;c++)d.getFromRESTServer("user_id="+a.searchResult[c].ID,"getUserProfilePicture").success(function(b){if(null!=b.jsonError||null!=b.errCode)alert(JSON.stringify(b));else for(var c=0;c<a.searchResult.length;c++)a.searchResult[c].ID==b.id&&(a.searchResult[c].image=b.base64)})}})},a.filter=f.getSessionStorage("filter"),null!=a.filter&&(null!=a.filter.pricefrom&&(a.pricefrom=a.filter.pricefrom),null!=a.filter.priceto&&(a.priceto=a.filter.priceto),a.doSearch(a.filter)),a.orderByField="",a.reverseSort=!1,d.getCodeTable("codetable=3").success(function(c){if(b.languages=c,null!=a.filter&&null!=a.filter.mothertongueSearchFrom)for(var d=0;d<b.languages.length;d++)b.languages[d].DESCRIZIONE==a.filter.mothertongueSearchFrom&&(a.mothertongueSearchFrom=b.languages[d]);if(null!=a.filter&&null!=a.filter.mothertongueSearchTo)for(var d=0;d<b.languages.length;d++)b.languages[d].DESCRIZIONE==a.filter.mothertongueSearchTo&&(a.mothertongueSearchTo=b.languages[d])}),d.getCodeTable("codetable=4").success(function(c){if(b.fields=c,null!=a.filter&&null!=a.filter.field)for(var d=0;d<b.fields.length;d++)b.fields[d].DESCRIZIONE==a.filter.field&&(a.field=b.fields[d])}),d.getCodeTable("codetable=5").success(function(c){if(b.services=c,a.service=c[0],null!=a.filter&&null!=a.filter.service)for(var d=0;d<b.services.length;d++)b.services[d].DESCRIZIONE==a.filter.service&&(a.service=b.services[d])}),a.doResetForm=function(){a.mothertongueSearchFrom=null,a.mothertongueSearchTo=null,a.service=null,a.field=null,a.pricefrom=null,a.priceto=null,a.searchForm.$setPristine()}}]),search.controller("TranslatorDetailCtrl",["$scope","$rootScope","$window","services","$location","customFactory","$routeParams",function(a,b,c,d,e,f,g){b.isLogged=f.get("isLogged"),b.userData=f.get("userData"),(null==f.get("isLogged")||null==f.get("userData"))&&e.path("/"),null!=b.isLogged&&null!=b.userData&&"TRADUTTORE"==b.userData.RUOLO&&e.path("/home_traduttore"),a.user_id=g.user_id,a.showComments=!1,b.image=null,d.getFromRESTServer("user_id="+a.user_id,"getUserData").success(function(b){null!=b.jsonError||null!=b.errCode||(a.traduttoreDetail=b[1])}),d.getFromRESTServer("user_id="+a.user_id,"getAllTranslatorComments").success(function(b){null!=b.jsonError||null!=b.errCode||(a.commentsAll=b)}),d.getFromRESTServer("user_id="+a.user_id,"getPair").success(function(b){null!=b.jsonError||null!=b.errCode?a.pairList=null:a.pairList=b}),d.getFromRESTServer("user_id="+a.user_id,"getEducation").success(function(b){null!=b.jsonError||null!=b.errCode?a.educationList=null:a.educationList=b}),d.getFromRESTServer("user_id="+a.user_id,"getCertification").success(function(b){null!=b.jsonError||null!=b.errCode?a.certificationList=null:a.certificationList=b}),d.getFromRESTServer("user_id="+a.user_id,"getImagePath").success(function(b){null!=b.jsonError||null!=b.errCode||d.getFromRESTServer("user_id="+a.user_id,"getUserProfilePicture").success(function(b){null!=b.jsonError||null!=b.errCode?alert(JSON.stringify(b)):a.image=b.base64})})}]),search.controller("SendAJobCtrl",["$scope","$rootScope","$window","services","$location","customFactory","$routeParams",function(a,b,c,d,e,f,g){
b.isLogged=f.get("isLogged"),b.userData=f.get("userData"),(null==f.get("isLogged")||null==f.get("userData"))&&e.path("/"),null!=b.isLogged&&null!=b.userData&&"TRADUTTORE"==b.userData.RUOLO&&e.path("/home_traduttore"),a.recipientList=[],a.filter=f.getSessionStorage("filter"),a.user_id=g.user_id,d.getFromRESTServer("user_id="+a.user_id,"getUserData").success(function(b){null!=b.jsonError||null!=b.errCode||(a.recipient=b[1],a.recipientList.push(a.recipient.NOME+" "+a.recipient.COGNOME))})}]);var dett=angular.module("JobsCtrlTraduttoreModule");dett.controller("WorkareaTraduttoreCtrl",["$http","$scope","$rootScope","$routeParams","$location","services","customFactory","APP_CFG","$sce","$route",function(a,b,c,d,e,f,g,h,i,j){c.showWorkarea=!0,b.accepted=!1,b.getJobTODO=null,c.isLogged=g.get("isLogged"),c.userData=g.get("userData"),(null==g.get("isLogged")||null==g.get("userData"))&&e.path("/"),b.id_job=d.id,b.tipo_job=d.tipo,f.getFromRESTServer("id_job="+b.id_job+"&tipo_job="+b.tipo_job,"dettaglio_job").success(function(a){b.job=a[0],CKEDITOR.instances.done.setData(b.job.TEXT_DONE),"ENGAGMENT"==b.job.STATO||"COMPETITION"==b.job.STATO||"DECLINED"==b.job.STATO?b.accepted=!1:b.accepted=!0,b.getJobTODO=function(){return h.endpoint_upload_server+"/uploadedFiles/"+b.job.ID_AGENZIA+"/"+b.job.JOB_PATH}}),b.doAccept=function(){var a=confirm("Do you really want to accept this job?");1==a&&(b.accepted="true",f.getFromRESTServer("id_job="+b.id_job+"&tipo_job="+b.tipo_job+"&status=ACTIVE","update_job_status").success(function(a){}),f.getFromRESTServer("id_job="+b.id_job+"&tipo_job="+b.tipo_job+"&user_id="+c.userData.ID,"doAccept").success(function(a){$.notify("Congratulation! You have just accepted this job!",{type:"success",allow_dismiss:!0})}))},b.doDecline=function(){var a=confirm("Do you really want to decline this job? It will never ever available!");1==a&&(f.getFromRESTServer("id_job="+b.id_job+"&tipo_job="+b.tipo_job+"&status=DECLINED","update_job_status").success(function(a){}),f.getFromRESTServer("id_job="+b.id_job+"&tipo_job="+b.tipo_job+"&user_id="+c.userData.ID,"doDecline").success(function(a){e.path("/jobs_traduttore"),$.notify("We are very sad! We hope you'll find something else!",{type:"success",allow_dismiss:!0})}))},b.doSave=function(){for(var a in CKEDITOR.instances)CKEDITOR.instances[a].updateElement();f.getFromRESTServer("id_job="+b.id_job+"&text="+CKEDITOR.instances.done.getData()+"&tipo_job="+b.tipo_job,"save_job").success(function(a){})},b.doSend=function(){var a=confirm("Do you really want to send and finish this job?");1==a&&(f.getFromRESTServer("id_job="+b.id_job+"&tipo_job="+b.tipo_job+"&status=IN APPROVAL","update_job_status").success(function(a){}),f.getFromRESTServer("id_job="+b.id_job+"&tipo_job="+b.tipo_job+"&id_agenzia="+b.job.ID_AGENZIA,"doSend").success(function(a){e.path("/jobs_traduttore"),$.notify("Thank you very much! Agency is going to approve your work!",{type:"success",allow_dismiss:!0}),c.showWorkarea=!1}))}}]);var t=void 0,u=!1,sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return"CORRUPT: "+this.message},this.message=a},invalid:function(a){this.toString=function(){return"INVALID: "+this.message},this.message=a},bug:function(a){this.toString=function(){return"BUG: "+this.message},this.message=a},notReady:function(a){this.toString=function(){return"NOT READY: "+this.message},this.message=a}}};"undefined"!=typeof module&&module.exports&&(module.exports=sjcl),"function"==typeof define&&define([],function(){return sjcl}),sjcl.cipher.aes=function(a){this.k[0][0][0]||this.D();var b,c,d,e,f=this.k[0][4],g=this.k[1];b=a.length;var h=1;for(4!==b&&6!==b&&8!==b&&q(new sjcl.exception.invalid("invalid aes key size")),this.b=[d=a.slice(0),e=[]],a=b;4*b+28>a;a++)c=d[a-1],(0===a%b||8===b&&4===a%b)&&(c=f[c>>>24]<<24^f[c>>16&255]<<16^f[c>>8&255]<<8^f[255&c],0===a%b&&(c=c<<8^c>>>24^h<<24,h=h<<1^283*(h>>7))),d[a]=d[a-b]^c;for(b=0;a;b++,a--)c=d[3&b?a:a-4],e[b]=4>=a||4>b?c:g[0][f[c>>>24]]^g[1][f[c>>16&255]]^g[2][f[c>>8&255]]^g[3][f[255&c]]},sjcl.cipher.aes.prototype={encrypt:function(a){return y(this,a,0)},decrypt:function(a){return y(this,a,1)},k:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){var a,b,c,d,e,f,g,h=this.k[0],i=this.k[1],j=h[4],k=i[4],l=[],m=[];for(a=0;256>a;a++)m[(l[a]=a<<1^283*(a>>7))^a]=a;for(b=c=0;!j[b];b^=d||1,c=m[c]||1)for(f=c^c<<1^c<<2^c<<3^c<<4,f=f>>8^255&f^99,j[b]=f,k[f]=b,e=l[a=l[d=l[b]]],g=16843009*e^65537*a^257*d^16843008*b,e=257*l[f]^16843008*f,a=0;4>a;a++)h[a][b]=e=e<<24^e>>>8,i[a][f]=g=g<<24^g>>>8;for(a=0;5>a;a++)h[a]=h[a].slice(0),i[a]=i[a].slice(0)}},sjcl.bitArray={bitSlice:function(a,b,c){return a=sjcl.bitArray.P(a.slice(b/32),32-(31&b)).slice(1),c===t?a:sjcl.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d=Math.floor(-b-c&31);return(-32&(b+c-1^b)?a[b/32|0]<<32-d^a[b/32+1|0]>>>d:a[b/32|0]>>>d)&(1<<c)-1},concat:function(a,b){if(0===a.length||0===b.length)return a.concat(b);var c=a[a.length-1],d=sjcl.bitArray.getPartial(c);return 32===d?a.concat(b):sjcl.bitArray.P(b,d,0|c,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length;return 0===b?0:32*(b-1)+sjcl.bitArray.getPartial(a[b-1])},clamp:function(a,b){if(32*a.length<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;return b&=31,c>0&&b&&(a[c-1]=sjcl.bitArray.partial(b,a[c-1]&2147483648>>b-1,1)),a},partial:function(a,b,c){return 32===a?b:(c?0|b:b<<32-a)+1099511627776*a},getPartial:function(a){return Math.round(a/1099511627776)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return u;var c,d=0;for(c=0;c<a.length;c++)d|=a[c]^b[c];return 0===d},P:function(a,b,c,d){var e;for(e=0,d===t&&(d=[]);b>=32;b-=32)d.push(c),c=0;if(0===b)return d.concat(a);for(e=0;e<a.length;e++)d.push(c|a[e]>>>b),c=a[e]<<32-b;return e=a.length?a[a.length-1]:0,a=sjcl.bitArray.getPartial(e),d.push(sjcl.bitArray.partial(b+a&31,b+a>32?c:d.pop(),1)),d},l:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]},byteswapM:function(a){var b,c;for(b=0;b<a.length;++b)c=a[b],a[b]=c>>>24|c>>>8&65280|(65280&c)<<8|c<<24;return a}},sjcl.codec.utf8String={fromBits:function(a){var b,c,d="",e=sjcl.bitArray.bitLength(a);for(b=0;e/8>b;b++)0===(3&b)&&(c=a[b/4]),d+=String.fromCharCode(c>>>24),c<<=8;return decodeURIComponent(escape(d))},toBits:function(a){a=unescape(encodeURIComponent(a));var b,c=[],d=0;for(b=0;b<a.length;b++)d=d<<8|a.charCodeAt(b),3===(3&b)&&(c.push(d),d=0);return 3&b&&c.push(sjcl.bitArray.partial(8*(3&b),d)),c}},sjcl.codec.hex={fromBits:function(a){var b,c="";for(b=0;b<a.length;b++)c+=((0|a[b])+0xf00000000000).toString(16).substr(4);return c.substr(0,sjcl.bitArray.bitLength(a)/4)},toBits:function(a){var b,c,d=[];for(a=a.replace(/\s|0x/g,""),c=a.length,a+="00000000",b=0;b<a.length;b+=8)d.push(0^parseInt(a.substr(b,8),16));return sjcl.bitArray.clamp(d,4*c)}},sjcl.codec.base64={J:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(a,b,c){var d="",e=0,f=sjcl.codec.base64.J,g=0,h=sjcl.bitArray.bitLength(a);for(c&&(f=f.substr(0,62)+"-_"),c=0;6*d.length<h;)d+=f.charAt((g^a[c]>>>e)>>>26),6>e?(g=a[c]<<6-e,e+=26,c++):(g<<=6,e-=6);for(;3&d.length&&!b;)d+="=";return d},toBits:function(a,b){a=a.replace(/\s|=/g,"");var c,d,e=[],f=0,g=sjcl.codec.base64.J,h=0;for(b&&(g=g.substr(0,62)+"-_"),c=0;c<a.length;c++)d=g.indexOf(a.charAt(c)),0>d&&q(new sjcl.exception.invalid("this isn't base64!")),f>26?(f-=26,e.push(h^d>>>f),h=d<<32-f):(f+=6,h^=d<<32-f);return 56&f&&e.push(sjcl.bitArray.partial(56&f,h,1)),e}},sjcl.codec.base64url={fromBits:function(a){return sjcl.codec.base64.fromBits(a,1,1)},toBits:function(a){return sjcl.codec.base64.toBits(a,1)}},sjcl.hash.sha256=function(a){this.b[0]||this.D(),a?(this.r=a.r.slice(0),this.o=a.o.slice(0),this.h=a.h):this.reset()},sjcl.hash.sha256.hash=function(a){return(new sjcl.hash.sha256).update(a).finalize()},sjcl.hash.sha256.prototype={blockSize:512,reset:function(){return this.r=this.N.slice(0),this.o=[],this.h=0,this},update:function(a){"string"==typeof a&&(a=sjcl.codec.utf8String.toBits(a));var b,c=this.o=sjcl.bitArray.concat(this.o,a);for(b=this.h,a=this.h=b+sjcl.bitArray.bitLength(a),b=512+b&-512;a>=b;b+=512)z(this,c.splice(0,16));return this},finalize:function(){var a,b=this.o,c=this.r,b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]);for(a=b.length+2;15&a;a++)b.push(0);for(b.push(Math.floor(this.h/4294967296)),b.push(0|this.h);b.length;)z(this,b.splice(0,16));return this.reset(),c},N:[],b:[],D:function(){function a(a){return 4294967296*(a-Math.floor(a))|0}var b,c=0,d=2;a:for(;64>c;d++){for(b=2;d>=b*b;b++)if(0===d%b)continue a;8>c&&(this.N[c]=a(Math.pow(d,.5))),this.b[c]=a(Math.pow(d,1/3)),c++}}},sjcl.mode.ccm={name:"ccm",encrypt:function(a,b,c,d,e){var f,g=b.slice(0),h=sjcl.bitArray,i=h.bitLength(c)/8,j=h.bitLength(g)/8;for(e=e||64,d=d||[],7>i&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),f=2;4>f&&j>>>8*f;f++);return 15-i>f&&(f=15-i),c=h.clamp(c,8*(15-f)),b=sjcl.mode.ccm.L(a,b,c,d,e,f),g=sjcl.mode.ccm.p(a,g,c,b,e,f),h.concat(g.data,g.tag)},decrypt:function(a,b,c,d,e){e=e||64,d=d||[];var f=sjcl.bitArray,g=f.bitLength(c)/8,h=f.bitLength(b),i=f.clamp(b,h-e),j=f.bitSlice(b,h-e),h=(h-e)/8;for(7>g&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),b=2;4>b&&h>>>8*b;b++);return 15-g>b&&(b=15-g),c=f.clamp(c,8*(15-b)),i=sjcl.mode.ccm.p(a,i,c,j,e,b),a=sjcl.mode.ccm.L(a,i.data,c,d,e,b),f.equal(i.tag,a)||q(new sjcl.exception.corrupt("ccm: tag doesn't match")),i.data},L:function(a,b,c,d,e,f){var g=[],h=sjcl.bitArray,i=h.l;if(e/=8,(e%2||4>e||e>16)&&q(new sjcl.exception.invalid("ccm: invalid tag length")),(4294967295<d.length||4294967295<b.length)&&q(new sjcl.exception.bug("ccm: can't deal with 4GiB or more data")),f=[h.partial(8,(d.length?64:0)|e-2<<2|f-1)],f=h.concat(f,c),f[3]|=h.bitLength(b)/8,f=a.encrypt(f),d.length)for(c=h.bitLength(d)/8,65279>=c?g=[h.partial(16,c)]:4294967295>=c&&(g=h.concat([h.partial(16,65534)],[c])),g=h.concat(g,d),d=0;d<g.length;d+=4)f=a.encrypt(i(f,g.slice(d,d+4).concat([0,0,0])));for(d=0;d<b.length;d+=4)f=a.encrypt(i(f,b.slice(d,d+4).concat([0,0,0])));return h.clamp(f,8*e)},p:function(a,b,c,d,e,f){var g,h=sjcl.bitArray;g=h.l;var i=b.length,j=h.bitLength(b);if(c=h.concat([h.partial(8,f-1)],c).concat([0,0,0]).slice(0,4),d=h.bitSlice(g(d,a.encrypt(c)),0,e),!i)return{tag:d,data:[]};for(g=0;i>g;g+=4)c[3]++,e=a.encrypt(c),b[g]^=e[0],b[g+1]^=e[1],b[g+2]^=e[2],b[g+3]^=e[3];return{tag:d,data:h.clamp(b,j)}}},sjcl.mode.ocb2={name:"ocb2",encrypt:function(a,b,c,d,e,f){128!==sjcl.bitArray.bitLength(c)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));var g,h=sjcl.mode.ocb2.H,i=sjcl.bitArray,j=i.l,k=[0,0,0,0];c=h(a.encrypt(c));var l,m=[];for(d=d||[],e=e||64,g=0;g+4<b.length;g+=4)l=b.slice(g,g+4),k=j(k,l),m=m.concat(j(c,a.encrypt(j(c,l)))),c=h(c);return l=b.slice(g),b=i.bitLength(l),g=a.encrypt(j(c,[0,0,0,b])),l=i.clamp(j(l.concat([0,0,0]),g),b),k=j(k,j(l.concat([0,0,0]),g)),k=a.encrypt(j(k,j(c,h(c)))),d.length&&(k=j(k,f?d:sjcl.mode.ocb2.pmac(a,d))),m.concat(i.concat(l,i.clamp(k,e)))},decrypt:function(a,b,c,d,e,f){128!==sjcl.bitArray.bitLength(c)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits")),e=e||64;var g,h,i=sjcl.mode.ocb2.H,j=sjcl.bitArray,k=j.l,l=[0,0,0,0],m=i(a.encrypt(c)),n=sjcl.bitArray.bitLength(b)-e,o=[];for(d=d||[],c=0;n/32>c+4;c+=4)g=k(m,a.decrypt(k(m,b.slice(c,c+4)))),l=k(l,g),o=o.concat(g),m=i(m);return h=n-32*c,g=a.encrypt(k(m,[0,0,0,h])),g=k(g,j.clamp(b.slice(c),h).concat([0,0,0])),l=k(l,g),l=a.encrypt(k(l,k(m,i(m)))),d.length&&(l=k(l,f?d:sjcl.mode.ocb2.pmac(a,d))),j.equal(j.clamp(l,e),j.bitSlice(b,n))||q(new sjcl.exception.corrupt("ocb: tag doesn't match")),o.concat(j.clamp(g,h))},pmac:function(a,b){var c,d=sjcl.mode.ocb2.H,e=sjcl.bitArray,f=e.l,g=[0,0,0,0],h=a.encrypt([0,0,0,0]),h=f(h,d(d(h)));for(c=0;c+4<b.length;c+=4)h=d(h),g=f(g,a.encrypt(f(h,b.slice(c,c+4))));return c=b.slice(c),128>e.bitLength(c)&&(h=f(h,d(h)),c=e.concat(c,[-2147483648,0,0,0])),g=f(g,c),a.encrypt(f(d(f(h,d(h))),g))},H:function(a){return[a[0]<<1^a[1]>>>31,a[1]<<1^a[2]>>>31,a[2]<<1^a[3]>>>31,a[3]<<1^135*(a[0]>>>31)]}},sjcl.mode.gcm={name:"gcm",encrypt:function(a,b,c,d,e){var f=b.slice(0);return b=sjcl.bitArray,d=d||[],a=sjcl.mode.gcm.p(!0,a,f,d,c,e||128),b.concat(a.data,a.tag)},decrypt:function(a,b,c,d,e){var f=b.slice(0),g=sjcl.bitArray,h=g.bitLength(f);return e=e||128,d=d||[],h>=e?(b=g.bitSlice(f,h-e),f=g.bitSlice(f,0,h-e)):(b=f,f=[]),a=sjcl.mode.gcm.p(u,a,f,d,c,e),g.equal(a.tag,b)||q(new sjcl.exception.corrupt("gcm: tag doesn't match")),a.data},Z:function(a,b){var c,d,e,f,g,h=sjcl.bitArray.l;for(e=[0,0,0,0],f=b.slice(0),c=0;128>c;c++){for((d=0!==(a[Math.floor(c/32)]&1<<31-c%32))&&(e=h(e,f)),g=0!==(1&f[3]),d=3;d>0;d--)f[d]=f[d]>>>1|(1&f[d-1])<<31;f[0]>>>=1,g&&(f[0]^=-520093696)}return e},g:function(a,b,c){var d,e=c.length;for(b=b.slice(0),d=0;e>d;d+=4)b[0]^=4294967295&c[d],b[1]^=4294967295&c[d+1],b[2]^=4294967295&c[d+2],b[3]^=4294967295&c[d+3],b=sjcl.mode.gcm.Z(b,a);return b},p:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o=sjcl.bitArray;for(l=c.length,m=o.bitLength(c),n=o.bitLength(d),h=o.bitLength(e),g=b.encrypt([0,0,0,0]),96===h?(e=e.slice(0),e=o.concat(e,[1])):(e=sjcl.mode.gcm.g(g,[0,0,0,0],e),e=sjcl.mode.gcm.g(g,e,[0,0,Math.floor(h/4294967296),4294967295&h])),h=sjcl.mode.gcm.g(g,[0,0,0,0],d),k=e.slice(0),d=h.slice(0),a||(d=sjcl.mode.gcm.g(g,h,c)),j=0;l>j;j+=4)k[3]++,i=b.encrypt(k),c[j]^=i[0],c[j+1]^=i[1],c[j+2]^=i[2],c[j+3]^=i[3];return c=o.clamp(c,m),a&&(d=sjcl.mode.gcm.g(g,h,c)),a=[Math.floor(n/4294967296),4294967295&n,Math.floor(m/4294967296),4294967295&m],d=sjcl.mode.gcm.g(g,d,a),i=b.encrypt(e),d[0]^=i[0],d[1]^=i[1],d[2]^=i[2],d[3]^=i[3],{tag:o.bitSlice(d,0,f),data:c}}},sjcl.misc.hmac=function(a,b){this.M=b=b||sjcl.hash.sha256;var c,d=[[],[]],e=b.prototype.blockSize/32;for(this.n=[new b,new b],a.length>e&&(a=b.hash(a)),c=0;e>c;c++)d[0][c]=909522486^a[c],d[1][c]=1549556828^a[c];this.n[0].update(d[0]),this.n[1].update(d[1]),this.G=new b(this.n[0])},sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(a){return this.Q&&q(new sjcl.exception.invalid("encrypt on already updated hmac called!")),this.update(a),this.digest(a)},sjcl.misc.hmac.prototype.reset=function(){this.G=new this.M(this.n[0]),this.Q=u},sjcl.misc.hmac.prototype.update=function(a){this.Q=!0,this.G.update(a)},sjcl.misc.hmac.prototype.digest=function(){var a=this.G.finalize(),a=new this.M(this.n[1]).update(a).finalize();return this.reset(),a},sjcl.misc.pbkdf2=function(a,b,c,d,e){c=c||1e3,(0>d||0>c)&&q(sjcl.exception.invalid("invalid params to pbkdf2")),"string"==typeof a&&(a=sjcl.codec.utf8String.toBits(a)),"string"==typeof b&&(b=sjcl.codec.utf8String.toBits(b)),e=e||sjcl.misc.hmac,a=new e(a);var f,g,h,i,j=[],k=sjcl.bitArray;for(i=1;32*j.length<(d||1);i++){for(e=f=a.encrypt(k.concat(b,[i])),g=1;c>g;g++)for(f=a.encrypt(f),h=0;h<f.length;h++)e[h]^=f[h];j=j.concat(e)}return d&&(j=k.clamp(j,d)),j},sjcl.prng=function(a){this.c=[new sjcl.hash.sha256],this.i=[0],this.F=0,this.s={},this.C=0,this.K={},this.O=this.d=this.j=this.W=0,this.b=[0,0,0,0,0,0,0,0],this.f=[0,0,0,0],this.A=t,this.B=a,this.q=u,this.w={progress:{},seeded:{}},this.m=this.V=0,this.t=1,this.u=2,this.S=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.T=3e4,this.R=80},sjcl.prng.prototype={randomWords:function(a,b){var c,d=[];c=this.isReady(b);var e;if(c===this.m&&q(new sjcl.exception.notReady("generator isn't seeded")),c&this.u){c=!(c&this.t),e=[];var f,g=0;for(this.O=e[0]=(new Date).valueOf()+this.T,f=0;16>f;f++)e.push(4294967296*Math.random()|0);for(f=0;f<this.c.length&&(e=e.concat(this.c[f].finalize()),g+=this.i[f],this.i[f]=0,!(!c&&this.F&1<<f));f++);for(this.F>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.i.push(0)),this.d-=g,g>this.j&&(this.j=g),this.F++,this.b=sjcl.hash.sha256.hash(this.b.concat(e)),this.A=new sjcl.cipher.aes(this.b),c=0;4>c&&(this.f[c]=this.f[c]+1|0,!this.f[c]);c++);}for(c=0;a>c;c+=4)0===(c+1)%this.S&&A(this),e=B(this),d.push(e[0],e[1],e[2],e[3]);return A(this),d.slice(0,a)},setDefaultParanoia:function(a,b){0===a&&"Setting paranoia=0 will ruin your security; use it only for testing"!==b&&q("Setting paranoia=0 will ruin your security; use it only for testing"),this.B=a},addEntropy:function(a,b,c){c=c||"user";var d,e,f=(new Date).valueOf(),g=this.s[c],h=this.isReady(),i=0;switch(d=this.K[c],d===t&&(d=this.K[c]=this.W++),g===t&&(g=this.s[c]=0),this.s[c]=(this.s[c]+1)%this.c.length,typeof a){case"number":b===t&&(b=1),this.c[g].update([d,this.C++,1,b,f,1,0|a]);break;case"object":if(c=Object.prototype.toString.call(a),"[object Uint32Array]"===c){for(e=[],c=0;c<a.length;c++)e.push(a[c]);a=e}else for("[object Array]"!==c&&(i=1),c=0;c<a.length&&!i;c++)"number"!=typeof a[c]&&(i=1);if(!i){if(b===t)for(c=b=0;c<a.length;c++)for(e=a[c];e>0;)b++,e>>>=1;this.c[g].update([d,this.C++,2,b,f,a.length].concat(a))}break;case"string":b===t&&(b=a.length),this.c[g].update([d,this.C++,3,b,f,a.length]),this.c[g].update(a);break;default:i=1}i&&q(new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.i[g]+=b,this.d+=b,h===this.m&&(this.isReady()!==this.m&&C("seeded",Math.max(this.j,this.d)),C("progress",this.getProgress()))},isReady:function(a){return a=this.I[a!==t?a:this.B],this.j&&this.j>=a?this.i[0]>this.R&&(new Date).valueOf()>this.O?this.u|this.t:this.t:this.d>=a?this.u|this.m:this.m},getProgress:function(a){return a=this.I[a?a:this.B],this.j>=a?1:this.d>a?1:this.d/a},startCollectors:function(){this.q||(this.a={loadTimeCollector:D(this,this.aa),mouseCollector:D(this,this.ba),keyboardCollector:D(this,this.$),accelerometerCollector:D(this,this.U)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,u),window.addEventListener("mousemove",this.a.mouseCollector,u),window.addEventListener("keypress",this.a.keyboardCollector,u),window.addEventListener("devicemotion",this.a.accelerometerCollector,u)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):q(new sjcl.exception.bug("can't attach event")),this.q=!0)},stopCollectors:function(){this.q&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,u),window.removeEventListener("mousemove",this.a.mouseCollector,u),window.removeEventListener("keypress",this.a.keyboardCollector,u),window.removeEventListener("devicemotion",this.a.accelerometerCollector,u)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.q=u)},addEventListener:function(a,b){this.w[a][this.V++]=b},removeEventListener:function(a,b){var c,d,e=this.w[a],f=[];for(d in e)e.hasOwnProperty(d)&&e[d]===b&&f.push(d);for(c=0;c<f.length;c++)d=f[c],delete e[d]},$:function(){E(1)},ba:function(a){var b,c;try{b=a.x||a.clientX||a.offsetX||0,c=a.y||a.clientY||a.offsetY||0}catch(d){c=b=0}0!=b&&0!=c&&sjcl.random.addEntropy([b,c],2,"mouse"),E(0)},aa:function(){E(2)},U:function(a){if(a=a.accelerationIncludingGravity.x||a.accelerationIncludingGravity.y||a.accelerationIncludingGravity.z,window.orientation){var b=window.orientation;"number"==typeof b&&sjcl.random.addEntropy(b,1,"accelerometer")}a&&sjcl.random.addEntropy(a,2,"accelerometer"),E(0)}},sjcl.random=new sjcl.prng(6);a:try{var F,G,H,I;if(I="undefined"!=typeof module){var J;if(J=module.exports){var K;try{K=require("crypto")}catch(L){K=null}J=(G=K)&&G.randomBytes}I=J}if(I)F=G.randomBytes(128),F=new Uint32Array(new Uint8Array(F).buffer),sjcl.random.addEntropy(F,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(H=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(H);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break a;window.msCrypto.getRandomValues(H)}sjcl.random.addEntropy(H,1024,"crypto['getRandomValues']")}}catch(M){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(M))}sjcl.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Y:function(a,b,c,d){c=c||{},d=d||{};var e,f=sjcl.json,g=f.e({iv:sjcl.random.randomWords(4,0)},f.defaults);return f.e(g,c),c=g.adata,"string"==typeof g.salt&&(g.salt=sjcl.codec.base64.toBits(g.salt)),"string"==typeof g.iv&&(g.iv=sjcl.codec.base64.toBits(g.iv)),(!sjcl.mode[g.mode]||!sjcl.cipher[g.cipher]||"string"==typeof a&&100>=g.iter||64!==g.ts&&96!==g.ts&&128!==g.ts||128!==g.ks&&192!==g.ks&&256!==g.ks||2>g.iv.length||4<g.iv.length)&&q(new sjcl.exception.invalid("json encrypt: invalid parameters")),"string"==typeof a?(e=sjcl.misc.cachedPbkdf2(a,g),a=e.key.slice(0,g.ks/32),g.salt=e.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.publicKey&&(e=a.kem(),g.kemtag=e.tag,a=e.key.slice(0,g.ks/32)),"string"==typeof b&&(b=sjcl.codec.utf8String.toBits(b)),"string"==typeof c&&(c=sjcl.codec.utf8String.toBits(c)),e=new sjcl.cipher[g.cipher](a),f.e(d,g),d.key=a,g.ct=sjcl.mode[g.mode].encrypt(e,b,g.iv,c,g.ts),g},encrypt:function(a,b,c,d){var e=sjcl.json,f=e.Y.apply(e,arguments);return e.encode(f)},X:function(a,b,c,d){c=c||{},d=d||{};var e=sjcl.json;b=e.e(e.e(e.e({},e.defaults),b),c,!0);var f,g;return f=b.adata,"string"==typeof b.salt&&(b.salt=sjcl.codec.base64.toBits(b.salt)),"string"==typeof b.iv&&(b.iv=sjcl.codec.base64.toBits(b.iv)),(!sjcl.mode[b.mode]||!sjcl.cipher[b.cipher]||"string"==typeof a&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&256!==b.ks||!b.iv||2>b.iv.length||4<b.iv.length)&&q(new sjcl.exception.invalid("json decrypt: invalid parameters")),"string"==typeof a?(g=sjcl.misc.cachedPbkdf2(a,b),a=g.key.slice(0,b.ks/32),b.salt=g.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.secretKey&&(a=a.unkem(sjcl.codec.base64.toBits(b.kemtag)).slice(0,b.ks/32)),"string"==typeof f&&(f=sjcl.codec.utf8String.toBits(f)),g=new sjcl.cipher[b.cipher](a),f=sjcl.mode[b.mode].decrypt(g,b.ct,b.iv,f,b.ts),e.e(d,b),d.key=a,1===c.raw?f:sjcl.codec.utf8String.fromBits(f)},decrypt:function(a,b,c,d){var e=sjcl.json;return e.X(a,e.decode(b),c,d)},encode:function(a){var b,c="{",d="";for(b in a)if(a.hasOwnProperty(b))switch(b.match(/^[a-z0-9]+$/i)||q(new sjcl.exception.invalid("json encode: invalid property name")),c+=d+'"'+b+'":',d=",",typeof a[b]){case"number":case"boolean":c+=a[b];break;case"string":c+='"'+escape(a[b])+'"';break;case"object":c+='"'+sjcl.codec.base64.fromBits(a[b],0)+'"';break;default:q(new sjcl.exception.bug("json encode: unsupported type"))}return c+"}"},decode:function(a){a=a.replace(/\s/g,""),a.match(/^\{.*\}$/)||q(new sjcl.exception.invalid("json decode: this isn't json!")),a=a.replace(/^\{|\}$/g,"").split(/,/);var b,c,d={};for(b=0;b<a.length;b++)(c=a[b].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i))||q(new sjcl.exception.invalid("json decode: this isn't json!")),d[c[2]]=c[3]?parseInt(c[3],10):c[2].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(c[4]):unescape(c[4]);return d},e:function(a,b,c){if(a===t&&(a={}),b===t)return a;for(var d in b)b.hasOwnProperty(d)&&(c&&a[d]!==t&&a[d]!==b[d]&&q(new sjcl.exception.invalid("required parameter overridden")),a[d]=b[d]);return a},ea:function(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&a[c]!==b[c]&&(d[c]=a[c]);return d},da:function(a,b){var c,d={};for(c=0;c<b.length;c++)a[b[c]]!==t&&(d[b[c]]=a[b[c]]);return d}},sjcl.encrypt=sjcl.json.encrypt,sjcl.decrypt=sjcl.json.decrypt,sjcl.misc.ca={},sjcl.misc.cachedPbkdf2=function(a,b){var c,d=sjcl.misc.ca;return b=b||{},c=b.iter||1e3,d=d[a]=d[a]||{},c=d[c]=d[c]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):sjcl.random.randomWords(2,0)},d=b.salt===t?c.firstSalt:b.salt,c[d]=c[d]||sjcl.misc.pbkdf2(a,d,b.iter),{key:c[d].slice(0),salt:d.slice(0)}};var common=angular.module("CommonModule",[]).factory("customFactory",["APP_CFG","services","$q",function(a,b,c){var d=null,e=c.defer(),f=e.promise;return b.getConfiguration().then(function(b,c){angular.extend(a,b.data),d=new Secur(a.defaultKK),e.resolve("OK!")}),{promise:f,get:function(a){var b=localStorage[a];return b?angular.fromJson(d.decrypt(b)):null},set:function(a,b){localStorage[a]=d.encrypt(angular.toJson(b||"undefined"))},getSessionStorage:function(a){var b=sessionStorage[a];return b?angular.fromJson(d.decrypt(b)):null},setSessionStorage:function(a,b){sessionStorage[a]=d.encrypt(angular.toJson(b||"undefined"))}}}]),Secur=function(){function a(a){function c(a,b){var c=sjcl.misc.cachedPbkdf2(a,{iter:1e3});e.kk=b?sjcl.codec.hex.fromBits(c.key):a}function d(a){alert(a)}var e=this;c(a),this.encrypt=function(a){return sjcl.encrypt(e.kk,a,b,{})},this.setK=function(a,b){c(a,b)},this.decrypt=function(a){var b=null;try{b=sjcl.decrypt(e.kk,a)}catch(c){console.log("Can't decrypt: "+c),d("Can't decrypt: "+c)}return b}}var b={iter:1e3,ts:128,ks:256};return a}();!function(a){function b(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function c(a){var b=++j;return String(null==a?"rmjs-":a)+b}function d(a){var b=a.clone().css({height:"auto",width:a.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(a),c=b.outerHeight(),d=parseInt(b.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),e=a.data("defaultHeight");b.remove();var f=d||a.data("collapsedHeight")||e;a.data({expandedHeight:c,maxHeight:d,collapsedHeight:f}).css({maxHeight:"none"})}function e(a){if(!i[a.selector]){var b=" ";a.embedCSS&&""!==a.blockCSS&&(b+=a.selector+" + [data-readmore-toggle], "+a.selector+"[data-readmore]{"+a.blockCSS+"}"),b+=a.selector+"[data-readmore]{transition: height "+a.speed+"ms;overflow: hidden;}",function(a,b){var c=a.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=b:c.appendChild(a.createTextNode(b)),a.getElementsByTagName("head")[0].appendChild(c)}(document,b),i[a.selector]=!0}}function f(b,c){this.element=b,this.options=a.extend({},h,c),e(this.options),this._defaults=h,this._name=g,this.init(),window.addEventListener?(window.addEventListener("load",k),window.addEventListener("resize",k)):(window.attachEvent("load",k),window.attachEvent("resize",k))}var g="readmore",h={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},i={},j=0,k=b(function(){a("[data-readmore]").each(function(){var b=a(this),c="true"===b.attr("aria-expanded");d(b),b.css({height:b.data(c?"expandedHeight":"collapsedHeight")})})},100);f.prototype={init:function(){var b=this,e=a(this.element);e.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),d(e);var f=e.data("collapsedHeight"),g=e.data("heightMargin");if(e.outerHeight(!0)<=f+g)return!0;var h=e.attr("id")||c(),i=b.options.startOpen?b.options.lessLink:b.options.moreLink;e.attr({"data-readmore":"","aria-expanded":!1,id:h}),e.after(a(i).on("click",function(a){b.toggle(this,e[0],a)}).attr({"data-readmore-toggle":"","aria-controls":h})),b.options.startOpen||e.css({height:f})},toggle:function(b,c,d){d&&d.preventDefault(),b||(b=a('[aria-controls="'+this.element.id+'"]')[0]),c||(c=this.element);var e=this,f=a(c),g="",h="",i=!1,j=f.data("collapsedHeight");f.height()<=j?(g=f.data("expandedHeight")+"px",h="lessLink",i=!0):(g=j,h="moreLink"),e.options.beforeToggle(b,c,!i),f.css({height:g}),f.on("transitionend",function(){e.options.afterToggle(b,c,i),a(this).attr({"aria-expanded":i}).off("transitionend")}),a(b).replaceWith(a(e.options[h]).on("click",function(a){e.toggle(this,c,a)}).attr({"data-readmore-toggle":"","aria-controls":f.attr("id")}))},destroy:function(){a(this.element).each(function(){var b=a(this);b.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),b.removeData()})}},a.fn.readmore=function(b){var c=arguments,d=this.selector;return b=b||{},"object"==typeof b?this.each(function(){if(a.data(this,"plugin_"+g)){var c=a.data(this,"plugin_"+g);c.destroy.apply(c)}b.selector=d,a.data(this,"plugin_"+g,new f(this,b))}):"string"==typeof b&&"_"!==b[0]&&"init"!==b?this.each(function(){var d=a.data(this,"plugin_"+g);d instanceof f&&"function"==typeof d[b]&&d[b].apply(d,Array.prototype.slice.call(c,1))}):void 0}}(jQuery);var app=angular.module("fileUpload",["angularFileUpload"]);app.controller("UploadCtrl",["$scope","$rootScope","$upload","APP_CFG","customFactory","services",function(a,b,c,d,e,f){a.$watch("files",function(){a.upload(a.files)}),a.upload=function(a){if(a&&a.length)for(var g=0;g<a.length;g++){var h=a[g];c.upload({url:d.endpoint_server+"/upload.php?action=uploadImage",fields:{user_id:b.userData.ID},file:h}).progress(function(a){parseInt(100*a.loaded/a.total)}).success(function(a,c,d,g){b.userData.IMAGE=g.file.name,e.set("userData",b.userData),f.getFromRESTServer("user_id="+b.userData.ID,"getUserProfilePicture").success(function(a){null!=a.jsonError||null!=a.errCode?alert(JSON.stringify(a)):b.image=a.base64})}).error(function(){$.notify("Error during file upload! Please check your firewall or internet connection",{type:"danger",allow_dismiss:!0})})}}}]),function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}function f(a){return function(){return this[a].apply(this,arguments)}}function g(b,c){function d(a,b){return b.toLowerCase()}var e,f=a(b).data(),g={},h=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var i in f)c.test(i)&&(e=i.replace(h,d),g[e]=f[i]);return g}function h(b){var c={};if(p[b]||(b=b.split("-")[0],p[b])){var d=p[b];return a.each(o,function(a,b){b in d&&(c[b]=d[b])}),c}}var i=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;d>c;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new i;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),j=function(b,c){this._process_options(c),this.dates=new i,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(q.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};j.prototype={constructor:j,_process_options:function(e){this._o=a.extend({},this._o,e);var f=this.o=a.extend({},this._o),g=f.language;switch(p[g]||(g=g.split("-")[0],p[g]||(g=n.language)),f.language=g,f.startView){case 2:case"decade":f.startView=2;break;case 1:case"year":f.startView=1;break;default:
f.startView=0}switch(f.minViewMode){case 1:case"months":f.minViewMode=1;break;case 2:case"years":f.minViewMode=2;break;default:f.minViewMode=0}f.startView=Math.max(f.startView,f.minViewMode),f.multidate!==!0&&(f.multidate=Number(f.multidate)||!1,f.multidate!==!1&&(f.multidate=Math.max(0,f.multidate))),f.multidateSeparator=String(f.multidateSeparator),f.weekStart%=7,f.weekEnd=(f.weekStart+6)%7;var h=q.parseFormat(f.format);if(f.startDate!==-(1/0)&&(f.startDate?f.startDate instanceof Date?f.startDate=this._local_to_utc(this._zero_time(f.startDate)):f.startDate=q.parseDate(f.startDate,h,f.language):f.startDate=-(1/0)),f.endDate!==1/0&&(f.endDate?f.endDate instanceof Date?f.endDate=this._local_to_utc(this._zero_time(f.endDate)):f.endDate=q.parseDate(f.endDate,h,f.language):f.endDate=1/0),f.daysOfWeekDisabled=f.daysOfWeekDisabled||[],a.isArray(f.daysOfWeekDisabled)||(f.daysOfWeekDisabled=f.daysOfWeekDisabled.split(/[,\s]*/)),f.daysOfWeekDisabled=a.map(f.daysOfWeekDisabled,function(a){return parseInt(a,10)}),f.datesDisabled=f.datesDisabled||[],!a.isArray(f.datesDisabled)){var i=[];i.push(q.parseDate(f.datesDisabled,h,f.language)),f.datesDisabled=i}f.datesDisabled=a.map(f.datesDisabled,function(a){return q.parseDate(a,h,f.language)});var j=String(f.orientation).toLowerCase().split(/\s+/g),k=f.orientation.toLowerCase();if(j=a.grep(j,function(a){return/^auto|left|right|top|bottom$/.test(a)}),f.orientation={x:"auto",y:"auto"},k&&"auto"!==k)if(1===j.length)switch(j[0]){case"top":case"bottom":f.orientation.y=j[0];break;case"left":case"right":f.orientation.x=j[0]}else k=a.grep(j,function(a){return/^left|right$/.test(a)}),f.orientation.x=k[0]||"auto",k=a.grep(j,function(a){return/^top|bottom$/.test(a)}),f.orientation.y=k[0]||"auto";else;if(f.defaultViewDate){var l=f.defaultViewDate.year||(new Date).getFullYear(),m=f.defaultViewDate.month||0,o=f.defaultViewDate.day||1;f.defaultViewDate=c(l,m,o)}else f.defaultViewDate=d();f.showOnFocus=f.showOnFocus!==b?f.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){var b={keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(b.focus=a.proxy(this.show,this)),this.isInput?this._events=[[this.element,b]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),b],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return q.formatDate(c,b,this.o.language)},this)})},show:function(){return this.element.attr("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this)},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return"undefined"!=typeof a?new Date(a):null},clearDates:function(){var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,b),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:f("setDates"),setUTCDate:f("setUTCDates"),setValue:function(){var a=this.getFormattedDate();return this.isInput?this.element.val(a).change():this.component&&this.element.find("input").val(a).change(),this},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return q.formatDate(a,c,d)}).join(this.o.multidateSeparator)},setStartDate:function(a){return this._process_options({startDate:a}),this.update(),this.updateNavArrows(),this},setEndDate:function(a){return this._process_options({endDate:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(a){return this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(a){this._process_options({datesDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=a(this.o.container).width(),f=a(this.o.container).height(),g=a(this.o.container).scrollTop(),h=a(this.o.container).offset(),i=[];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==b&&i.push(parseInt(b))});var j=Math.max.apply(Math,i)+10,k=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=k.left-h.left,o=k.top-h.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(n-=b-m)):k.left<0?(this.picker.addClass("datepicker-orient-left"),n-=k.left-d):n+b>e?(this.picker.addClass("datepicker-orient-right"),n=k.left+m-b):this.picker.addClass("datepicker-orient-left");var p,q,r=this.o.orientation.y;if("auto"===r&&(p=-g+o-c,q=g+f-(o+l+c),r=Math.max(p,q)===q?"top":"bottom"),this.picker.addClass("datepicker-orient-"+r),"top"===r?o+=l:o-=c+parseInt(this.picker.css("padding-top")),this.o.rtl){var s=e-(n+m);this.picker.css({top:o,right:s,zIndex:j})}else this.picker.css({top:o,left:n,zIndex:j});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),c=[],d=!1;return arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),c=c&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return q.parseDate(a,this.o.format,this.o.language)},this)),c=a.grep(c,a.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&b.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(a,b){return parseInt(b)+1});var c='<th class="cw">&#160;</th>';b+=c}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+p[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+p[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),g=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<f?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>f)&&c.push("new"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused"),this.o.todayHighlight&&b.getUTCFullYear()===g.getFullYear()&&b.getUTCMonth()===g.getMonth()&&b.getUTCDate()===g.getDate()&&c.push("today"),-1!==this.dates.contains(b)&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.o.datesDisabled.length>0&&a.grep(this.o.datesDisabled,function(a){return e(b,a)}).length>0&&c.push("disabled","disabled-date"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var d,e=new Date(this.viewDate),f=e.getUTCFullYear(),g=e.getUTCMonth(),h=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),i=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),j=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,k=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=p[this.o.language].today||p.en.today||"",m=p[this.o.language].clear||p.en.clear||"";if(!isNaN(f)&&!isNaN(g)){this.picker.find(".datepicker-days thead .datepicker-switch").text(p[this.o.language].months[g]+" "+f),this.picker.find("tfoot .today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(m).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var n=c(f,g-1,28),o=q.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(o),n.setUTCDate(o-(n.getUTCDay()-this.o.weekStart+7)%7);var r=new Date(n);r.setUTCDate(r.getUTCDate()+42),r=r.valueOf();for(var s,t=[];n.valueOf()<r;){if(n.getUTCDay()===this.o.weekStart&&(t.push("<tr>"),this.o.calendarWeeks)){var u=new Date(+n+(this.o.weekStart-n.getUTCDay()-7)%7*864e5),v=new Date(Number(u)+(11-u.getUTCDay())%7*864e5),w=new Date(Number(w=c(v.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),x=(v-w)/864e5/7+1;t.push('<td class="cw">'+x+"</td>")}if(s=this.getClassNames(n),s.push("day"),this.o.beforeShowDay!==a.noop){var y=this.o.beforeShowDay(this._utc_to_local(n));y===b?y={}:"boolean"==typeof y?y={enabled:y}:"string"==typeof y&&(y={classes:y}),y.enabled===!1&&s.push("disabled"),y.classes&&(s=s.concat(y.classes.split(/\s+/))),y.tooltip&&(d=y.tooltip)}s=a.unique(s),t.push('<td class="'+s.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+n.getUTCDate()+"</td>"),d=null,n.getUTCDay()===this.o.weekEnd&&t.push("</tr>"),n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(t.join(""));var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");if(a.each(this.dates,function(a,b){b.getUTCFullYear()===f&&z.eq(b.getUTCMonth()).addClass("active")}),(h>f||f>j)&&z.addClass("disabled"),f===h&&z.slice(0,i).addClass("disabled"),f===j&&z.slice(k+1).addClass("disabled"),this.o.beforeShowMonth!==a.noop){var A=this;a.each(z,function(b,c){if(!a(c).hasClass("disabled")){var d=new Date(f,b,1),e=A.o.beforeShowMonth(d);e===!1&&a(c).addClass("disabled")}})}t="",f=10*parseInt(f/10,10);var B=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var C,D=a.map(this.dates,function(a){return a.getUTCFullYear()}),E=-1;11>E;E++)C=["year"],-1===E?C.push("old"):10===E&&C.push("new"),-1!==a.inArray(f,D)&&C.push("active"),(h>f||f>j)&&C.push("disabled"),t+='<span class="'+C.join(" ")+'">'+f+"</span>",f+=1;B.html(t)}},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault();var d,e,f,g=a(b.target).closest("span, td, th");if(1===g.length)switch(g[0].nodeName.toLowerCase()){case"th":switch(g[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=q.modes[this.viewMode].navStep*("prev"===g[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var i=new Date;i=c(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),this.showMode(-2);var j="linked"===this.o.todayBtn?null:"view";this._setDate(i,j);break;case"clear":this.clearDates()}break;case"span":g.hasClass("disabled")||(this.viewDate.setUTCDate(1),g.hasClass("month")?(f=1,e=g.parent().find("span").index(g),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(c(d,e,f))):(f=1,e=0,d=parseInt(g.text(),10)||0,this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(d,e,f))),this.showMode(-1),this.fill());break;case"td":g.hasClass("day")&&!g.hasClass("disabled")&&(f=parseInt(g.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),g.hasClass("old")?0===e?(e=11,d-=1):e-=1:g.hasClass("new")&&(11===e?(e=0,d+=1):e+=1),this._setDate(c(d,e,f)))}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a||this.dates.clear(),-1!==b?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(b):this.o.multidate===!1?(this.dates.clear(),this.dates.push(a)):this.dates.push(a),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a)),b&&"view"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),b&&"view"===b||this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),!this.o.autoclose||b&&"date"!==b||this.hide()},moveMonth:function(a,c){if(!a)return b;if(!c)return a;var d,e,f=new Date(a.valueOf()),g=f.getUTCDate(),h=f.getUTCMonth(),i=Math.abs(c);if(c=c>0?1:-1,1===i)e=-1===c?function(){return f.getUTCMonth()===h}:function(){return f.getUTCMonth()!==d},d=h+c,f.setUTCMonth(d),(0>d||d>11)&&(d=(d+12)%12);else{for(var j=0;i>j;j++)f=this.moveMonth(f,c);d=f.getUTCMonth(),f.setUTCDate(g),e=function(){return d!==f.getUTCMonth()}}for(;e();)f.setUTCDate(--g),f.setUTCMonth(d);return f},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(!this.picker.is(":visible"))return void(27===a.keyCode&&this.show());var b,c,e,f=!1,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+b),e=new Date(g),e.setUTCDate(g.getUTCDate()+b)),this.dateWithinRange(e)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+7*b),e=new Date(g),e.setUTCDate(g.getUTCDate()+7*b)),this.dateWithinRange(e)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 32:break;case 13:g=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(g),f=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),"function"==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(f){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.children("div").hide().filter(".datepicker-"+q.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var k=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,m.call(a(this.inputs),c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};k.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=e-1,g=e+1,h=this.inputs.length;if(-1!==e){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d)}),d<this.dates[f])for(;f>=0&&d<this.dates[f];)this.pickers[f--].setUTCDate(d);else if(d>this.dates[g])for(;h>g&&d>this.dates[g];)this.pickers[g++].setUTCDate(d);this.updateDates(),delete this.updating}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var l=a.fn.datepicker,m=function(c){var d=Array.apply(null,arguments);d.shift();var e;return this.each(function(){var f=a(this),i=f.data("datepicker"),l="object"==typeof c&&c;if(!i){var m=g(this,"date"),o=a.extend({},n,m,l),p=h(o.language),q=a.extend({},n,p,m,l);if(f.hasClass("input-daterange")||q.inputs){var r={inputs:q.inputs||f.find("input").toArray()};f.data("datepicker",i=new k(this,a.extend(q,r)))}else f.data("datepicker",i=new j(this,q))}return"string"==typeof c&&"function"==typeof i[c]&&(e=i[c].apply(i,d),e!==b)?!1:void 0}),e!==b?e:this};a.fn.datepicker=m;var n=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},o=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=j;var p=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},q={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,q.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(d,e,f){function g(){var a=this.slice(0,m[k].length),b=m[k].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}if(!d)return b;if(d instanceof Date)return d;"string"==typeof e&&(e=q.parseFormat(e));var h,i,k,l=/([\-+]\d+)([dmwy])/,m=d.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){for(d=new Date,k=0;k<m.length;k++)switch(h=l.exec(m[k]),i=parseInt(h[1]),h[2]){case"d":d.setUTCDate(d.getUTCDate()+i);break;case"m":d=j.prototype.moveMonth.call(j.prototype,d,i);break;case"w":d.setUTCDate(d.getUTCDate()+7*i);break;case"y":d=j.prototype.moveYear.call(j.prototype,d,i)}return c(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)}m=d&&d.match(this.nonpunctuation)||[],d=new Date;var n,o,r={},s=["yyyy","yy","M","MM","m","mm","d","dd"],t={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};t.M=t.MM=t.mm=t.m,t.dd=t.d,d=c(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var u=e.parts.slice();if(m.length!==u.length&&(u=a(u).filter(function(b,c){return-1!==a.inArray(c,s)}).toArray()),m.length===u.length){var v;for(k=0,v=u.length;v>k;k++){if(n=parseInt(m[k],10),h=u[k],isNaN(n))switch(h){case"MM":o=a(p[f].months).filter(g),n=a.inArray(o[0],p[f].months)+1;break;case"M":o=a(p[f].monthsShort).filter(g),n=a.inArray(o[0],p[f].monthsShort)+1}r[h]=n}var w,x;for(k=0;k<s.length;k++)x=s[k],x in r&&!isNaN(r[x])&&(w=new Date(d),t[x](w,r[x]),isNaN(w)||(d=w))}return d},formatDate:function(b,c,d){if(!b)return"";"string"==typeof c&&(c=q.parseFormat(c));var e={d:b.getUTCDate(),D:p[d].daysShort[b.getUTCDay()],DD:p[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:p[d].monthsShort[b.getUTCMonth()],MM:p[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};q.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+q.headTemplate+"<tbody></tbody>"+q.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+q.headTemplate+q.contTemplate+q.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+q.headTemplate+q.contTemplate+q.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=q,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=l,this},a.fn.datepicker.version="1.4.0",a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),m.call(c,"show"))}),a(function(){m.call(a('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(a){a.fn.appear=function(b,c){var d=a.extend({one:!0},c);return this.each(function(){var c=a(this);if(c.appeared=!1,!b)return void c.trigger("appear",d.data);var e=a(window),f=function(){if(!c.is(":visible"))return void(c.appeared=!1);var a=e.scrollLeft(),b=e.scrollTop(),f=c.offset(),g=f.left,h=f.top;h+c.height()>=b&&h<=b+e.height()&&g+c.width()>=a&&g<=a+e.width()?c.appeared||c.trigger("appear",d.data):c.appeared=!1},g=function(){if(c.appeared=!0,d.one){e.unbind("scroll",f);var g=a.inArray(f,a.fn.appear.checks);g>=0&&a.fn.appear.checks.splice(g,1)}b.apply(this,arguments)};d.one?c.one("appear",d.data,g):c.bind("appear",d.data,g),e.scroll(f),a.fn.appear.checks.push(f),f()})},a.extend(a.fn.appear,{checks:[],timeout:null,checkAll:function(){var b=a.fn.appear.checks.length;if(b>0)for(;b--;)a.fn.appear.checks[b]()},run:function(){a.fn.appear.timeout&&clearTimeout(a.fn.appear.timeout),a.fn.appear.timeout=setTimeout(a.fn.appear.checkAll,20)}}),a.each(["append","prepend","after","before","attr","removeAttr","addClass","removeClass","toggleClass","remove","css","show","hide"],function(b,c){var d=a.fn[c];d&&(a.fn[c]=function(){var b=d.apply(this,arguments);return a.fn.appear.run(),b})})}(jQuery),function(a){var b=a(window),c=b.height();b.resize(function(){c=b.height()}),a.fn.parallax=function(d,e,f){function g(){j.each(function(){i=j.offset().top}),h=f?function(a){return a.outerHeight(!0)}:function(a){return a.height()},(arguments.length<1||null===d)&&(d="50%"),(arguments.length<2||null===e)&&(e=.5),(arguments.length<3||null===f)&&(f=!0);var g=b.scrollTop();j.each(function(){var b=a(this),f=b.offset().top,k=h(b);g>f+k||f>g+c||j.css("backgroundPosition",d+" "+Math.round((i-g)*e)+"px")})}var h,i,j=a(this);b.bind("scroll",g).resize(g),g()}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=.3*e*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),function(a,b){var c,d="superslides";c=function(c,d){this.options=b.extend({play:4e3,animation_speed:600,animation_easing:"swing",animation:"slide",inherit_width_from:a,inherit_height_from:a,pagination:!1,hashchange:!1,scrollable:!1,elements:{preserve:".preserve",nav:".slides-navigation",container:".slides-container",pagination:".slides-pagination"}},d);var e=this,f=b("<div>",{"class":"slides-control"}),g=1;this.$el=b(c),
this.$container=this.$el.find(this.options.elements.container);var h=function(){return g=e._findMultiplier(),e.$el.on("click",e.options.elements.nav+" a",function(a){a.preventDefault(),e.stop(),b(this).hasClass("next")?e.animate("next",function(){e.start()}):e.animate("prev",function(){e.start()})}),b(document).on("keyup",function(a){37===a.keyCode&&e.animate("prev"),39===a.keyCode&&e.animate("next")}),b(a).on("resize",function(){setTimeout(function(){var a=e.$container.children();e.width=e._findWidth(),e.height=e._findHeight(),a.css({width:e.width,left:e.width}),e.css.containers(),e.css.images()},10)}),b(a).on("hashchange",function(){var a,b=e._parseHash();a=b&&!isNaN(b)?e._upcomingSlide(b-1):e._upcomingSlide(b),a>=0&&a!==e.current&&e.animate(a)}),e.pagination._events(),e.start(),e},i={containers:function(){e.init?(e.$el.css({height:e.height}),e.$control.css({width:e.width*g,left:-e.width}),e.$container.css({})):(b("body").css({margin:0}),e.$el.css({position:"relative",overflow:"hidden",width:"100%",height:e.height}),e.$control.css({position:"relative",transform:"translate3d(0)",height:"100%",width:e.width*g,left:-e.width}),e.$container.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative",height:"100%"})),1===e.size()&&e.$el.find(e.options.elements.nav).hide()},images:function(){var a=e.$container.find("img").not(e.options.elements.preserve);a.removeAttr("width").removeAttr("height").css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","z-index":"-1","max-width":"none"}),a.each(function(){var a=e.image._aspectRatio(this),c=this;if(b.data(this,"processed"))e.image._scale(c,a),e.image._center(c,a);else{var d=new Image;d.onload=function(){e.image._scale(c,a),e.image._center(c,a),b.data(c,"processed",!0)},d.src=this.src}})},children:function(){var a=e.$container.children();a.is("img")&&(a.each(function(){if(b(this).is("img")){b(this).wrap("<div>");var a=b(this).attr("id");b(this).removeAttr("id"),b(this).parent().attr("id",a)}}),a=e.$container.children()),e.init||a.css({display:"none",left:2*e.width}),a.css({position:"absolute",overflow:"hidden",height:"100%",width:e.width,top:0,zIndex:0})}},j={slide:function(a,b){var c=e.$container.children(),d=c.eq(a.upcoming_slide);d.css({left:a.upcoming_position,display:"block"}),e.$control.animate({left:a.offset},e.options.animation_speed,e.options.animation_easing,function(){e.size()>1&&(e.$control.css({left:-e.width}),c.eq(a.upcoming_slide).css({left:e.width,zIndex:2}),a.outgoing_slide>=0&&c.eq(a.outgoing_slide).css({left:e.width,display:"none",zIndex:0})),b()})},fade:function(a,b){var c=this,d=c.$container.children(),e=d.eq(a.outgoing_slide),f=d.eq(a.upcoming_slide);f.css({left:this.width,opacity:1,display:"block"}),a.outgoing_slide>=0?e.animate({opacity:0},c.options.animation_speed,c.options.animation_easing,function(){c.size()>1&&(d.eq(a.upcoming_slide).css({zIndex:2}),a.outgoing_slide>=0&&d.eq(a.outgoing_slide).css({opacity:1,display:"none",zIndex:0})),b()}):(f.css({zIndex:2}),b())}};j=b.extend(j,b.fn.superslides.fx);var k={_centerY:function(a){var c=b(a);c.css({top:(e.height-c.height())/2})},_centerX:function(a){var c=b(a);c.css({left:(e.width-c.width())/2})},_center:function(a){e.image._centerX(a),e.image._centerY(a)},_aspectRatio:function(a){if(!a.naturalHeight&&!a.naturalWidth){var b=new Image;b.src=a.src,a.naturalHeight=b.height,a.naturalWidth=b.width}return a.naturalHeight/a.naturalWidth},_scale:function(a,c){c=c||e.image._aspectRatio(a);var d=e.height/e.width,f=b(a);d>c?f.css({height:e.height,width:e.height/c}):f.css({height:e.width*c,width:e.width})}},l={_setCurrent:function(a){if(e.$pagination){var b=e.$pagination.children();b.removeClass("current"),b.eq(a).addClass("current")}},_addItem:function(a){var c=a+1,d=c,f=e.$container.children().eq(a),g=f.attr("id");g&&(d=g);var h=b("<a>",{href:"#"+d,text:d});h.appendTo(e.$pagination)},_setup:function(){if(e.options.pagination&&1!==e.size()){var a=b("<nav>",{"class":e.options.elements.pagination.replace(/^\./,"")});e.$pagination=a.appendTo(e.$el);for(var c=0;c<e.size();c++)e.pagination._addItem(c)}},_events:function(){e.$el.on("click",e.options.elements.pagination+" a",function(a){a.preventDefault();var b=e._parseHash(this.hash),c=e._upcomingSlide(b-1);c!==e.current&&e.animate(c,function(){e.start()})})}};return this.css=i,this.image=k,this.pagination=l,this.fx=j,this.animation=this.fx[this.options.animation],this.$control=this.$container.wrap(f).parent(".slides-control"),e._findPositions(),e.width=e._findWidth(),e.height=e._findHeight(),this.css.children(),this.css.containers(),this.css.images(),this.pagination._setup(),h()},c.prototype={_findWidth:function(){return b(this.options.inherit_width_from).width()},_findHeight:function(){return b(this.options.inherit_height_from).height()},_findMultiplier:function(){return 1===this.size()?1:3},_upcomingSlide:function(a){if(/next/.test(a))return this._nextInDom();if(/prev/.test(a))return this._prevInDom();if(/\d/.test(a))return+a;if(a&&/\w/.test(a)){var b=this._findSlideById(a);return b>=0?b:0}return 0},_findSlideById:function(a){return this.$container.find("#"+a).index()},_findPositions:function(a,b){b=b||this,void 0===a&&(a=-1),b.current=a,b.next=b._nextInDom(),b.prev=b._prevInDom()},_nextInDom:function(){var a=this.current+1;return a===this.size()&&(a=0),a},_prevInDom:function(){var a=this.current-1;return 0>a&&(a=this.size()-1),a},_parseHash:function(b){return b=b||a.location.hash,b=b.replace(/^#/,""),b&&!isNaN(+b)&&(b=+b),b},size:function(){return this.$container.children().length},destroy:function(){return this.$el.removeData()},update:function(){this.css.children(),this.css.containers(),this.css.images(),this.pagination._addItem(this.size()),this._findPositions(this.current),this.$el.trigger("updated.slides")},stop:function(){clearInterval(this.play_id),delete this.play_id,this.$el.trigger("stopped.slides")},start:function(){var c=this;c.options.hashchange?b(a).trigger("hashchange"):this.animate(),this.options.play&&(this.play_id&&this.stop(),this.play_id=setInterval(function(){c.animate()},this.options.play)),this.$el.trigger("started.slides")},animate:function(b,c){var d=this,e={};if(!(this.animating||(this.animating=!0,void 0===b&&(b="next"),e.upcoming_slide=this._upcomingSlide(b),e.upcoming_slide>=this.size()))){if(e.outgoing_slide=this.current,e.upcoming_position=2*this.width,e.offset=-e.upcoming_position,("prev"===b||b<e.outgoing_slide)&&(e.upcoming_position=0,e.offset=0),d.size()>1&&d.pagination._setCurrent(e.upcoming_slide),d.options.hashchange){var f=e.upcoming_slide+1,g=d.$container.children(":eq("+e.upcoming_slide+")").attr("id");g?a.location.hash=g:a.location.hash=f}d.$el.trigger("animating.slides",[e]),d.animation(e,function(){d._findPositions(e.upcoming_slide,d),"function"==typeof c&&c(),d.animating=!1,d.$el.trigger("animated.slides"),d.init||(d.$el.trigger("init.slides"),d.init=!0,d.$container.fadeIn("fast"))})}}},b.fn[d]=function(a,e){var f=[];return this.each(function(){var g,h,i;return g=b(this),h=g.data(d),i="object"==typeof a&&a,h||(f=g.data(d,h=new c(this,i))),"string"==typeof a&&(f=h[a],"function"==typeof f)?f=f.call(h,e):void 0}),f},b.fn[d].fx={}}(this,jQuery),function(a){a.fn.fitVids=function(b){var c={customSelector:null};if(!document.getElementById("fit-vids-style")){var d=document.createElement("div"),e=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],f="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";d.className="fit-vids-style",d.id="fit-vids-style",d.style.display="none",d.innerHTML=f,e.parentNode.insertBefore(d,e)}return b&&a.extend(c,b),this.each(function(){var b=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];c.customSelector&&b.push(c.customSelector);var d=a(this).find(b.join(","));d=d.not("object object"),d.each(function(){var b=a(this);if(!("embed"===this.tagName.toLowerCase()&&b.parent("object").length||b.parent(".fluid-width-video-wrapper").length)){var c="object"===this.tagName.toLowerCase()||b.attr("height")&&!isNaN(parseInt(b.attr("height"),10))?parseInt(b.attr("height"),10):b.height(),d=isNaN(parseInt(b.attr("width"),10))?b.width():parseInt(b.attr("width"),10),e=c/d;if(!b.attr("id")){var f="fitvid"+Math.floor(999999*Math.random());b.attr("id",f)}b.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),b.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),function(a){function b(a,b){return a.toFixed(b.decimals)}a.fn.countTo=function(b){return b=b||{},a(this).each(function(){function c(){k+=g,j++,d(k),"function"==typeof e.onUpdate&&e.onUpdate.call(h,k),j>=f&&(i.removeData("countTo"),clearInterval(l.interval),k=e.to,"function"==typeof e.onComplete&&e.onComplete.call(h,k))}function d(a){var b=e.formatter.call(h,a,e);i.text(b)}var e=a.extend({},a.fn.countTo.defaults,{from:a(this).data("from"),to:a(this).data("to"),speed:a(this).data("speed"),refreshInterval:a(this).data("refresh-interval"),decimals:a(this).data("decimals")},b),f=Math.ceil(e.speed/e.refreshInterval),g=(e.to-e.from)/f,h=this,i=a(this),j=0,k=e.from,l=i.data("countTo")||{};i.data("countTo",l),l.interval&&clearInterval(l.interval),l.interval=setInterval(c,e.refreshInterval),d(k)})},a.fn.countTo.defaults={from:0,to:0,speed:1e3,refreshInterval:100,decimals:0,formatter:b,onUpdate:null,onComplete:null}}(jQuery),function(a,b){function c(b){return i.formatter=e,a(this).not(".tipper-attached").addClass("tipper-attached").on("mouseenter.tipper",a.extend({},i,b||{}),d)}function d(b){h=a("body");var c=a(this),d=a.extend(!0,{},b.data,c.data("tipper-options")),e="";e+='<div class="tipper '+d.direction+'">',e+='<div class="tipper-content">',e+=d.formatter.apply(h,[c]),e+='<span class="tipper-caret"</span>',e+="</div>",e+="</div>",d.$target=c,d.$tipper=a(e),h.append(d.$tipper),d.$content=d.$tipper.find(".tipper-content"),d.$caret=d.$tipper.find(".tipper-caret"),d.offset=c.offset(),d.height=c.outerHeight(),d.width=c.outerWidth(),d.tipperPos={},d.caretPos={},d.contentPos={};var i=d.$caret.outerHeight(!0),j=d.$caret.outerWidth(!0),k=d.$content.outerHeight(!0),l=d.$content.outerWidth(!0)+j;"right"===d.direction||"left"===d.direction?(d.caretPos.top=(k-i)/2,d.contentPos.top=-k/2,"right"===d.direction?d.contentPos.left=j+d.margin:"left"===d.direction&&(d.contentPos.left=-(l+d.margin))):(d.caretPos.left=(l-j)/2,d.contentPos.left=-l/2,"bottom"===d.direction?d.contentPos.top=d.margin:"top"===d.direction&&(d.contentPos.top=-(k+d.margin))),d.$content.css(d.contentPos),d.$caret.css(d.caretPos),d.follow?d.$target.on("mousemove.tipper",d,f).trigger("mousemove"):("right"===d.direction||"left"===d.direction?(d.tipperPos.top=d.offset.top+d.height/2,"right"===d.direction?d.tipperPos.left=d.offset.left+d.width:"left"===d.direction&&(d.tipperPos.left=d.offset.left)):(d.tipperPos.left=d.offset.left+d.width/2,"bottom"===d.direction?d.tipperPos.top=d.offset.top+d.height:"top"===d.direction&&(d.tipperPos.top=d.offset.top)),d.$tipper.css(d.tipperPos)),d.$target.one("mouseleave.tipper",d,g)}function e(a){return a.data("title")}function f(a){var b=a.data;b.$tipper.css({left:a.pageX,top:a.pageY})}function g(a){var b=a.data;b.$tipper.remove(),b.$target.off("mousemove.tipper mouseleave.tipper")}var h,i={direction:"top",follow:!1,formatter:a.noop,margin:15},j={defaults:function(b){return i=a.extend(i,b||{}),a(this)},destroy:function(){return a(this).trigger("mouseleave.tipper").off(".tipper").removeClass("tipper-attached")}};a.fn.tipper=function(a){return j[a]?j[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a.tipper=function(a){"defaults"===a&&j.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery);var sections=$(".section"),links=$(".scroll.link");$(window).scroll(function(){var a=$(this).scrollTop();links.removeClass("selected"),sections.each(function(){var b=$(this).offset().top-75,c=b+$(this).height();a>=b&&c>=a&&$('a[href="#'+this.id+'"]').addClass("selected")})}),$(document).ready(function(a){a("#submit").click(function(){a(".error").hide();var b=a("input#name").val(),c=a("input#email").val(),d=a("input#phone").val(),e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,f=/^[0-9-+]+$/;if(""==b||" "==b)return a("#error-name").fadeIn("slow"),!1;if(""==c||" "==c)return a("#error-email").fadeIn("slow"),!1;if(!e.test(c))return a("#error-valid-email").fadeIn("slow"),!1;if(!f.test(d))return a("#error-valid-phone").fadeIn("slow"),!1;var g=a("#contact-us").serialize();return a.ajax({type:"POST",url:a("#contact-us").attr("action"),data:g,timeout:6e3,error:function(b,c){"timeout"==c?a("#error-timedout").slideDown("slow"):a("#error-state").slideDown("slow")},success:function(){a("#email-success").slideDown("slow"),a("#contact-us").trigger("reset")}}),!1})});